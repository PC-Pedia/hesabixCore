import{_ as C,L as S,a as g,S as o,c as x}from"./main-9b36f05f.js";import{r as c,O as _,a as i,o as $,s as D,b as l,w as n,F as k,_ as A,e as a,d as h,aa as y}from"./vendor-adef9cb4.js";var j=Object.defineProperty,L=(e,t,s)=>t in e?j(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,V=(e,t,s)=>L(e,typeof t!="symbol"?t+"":t,s);c("system");c("system");const G={cancelText:"Cancel",confirmText:"Confirm",cancelButton:{text:"Cancel",color:"danger"},confirmButton:{text:"Confirm",color:"success"}};c(G);c([]);const u="";function N(e){return e.filter((t,s,v)=>s===v.indexOf(t))}function O(e){return(t=u)=>typeof t=="function"?e.findIndex((...s)=>t(...s))>-1:e.includes(t)}const U=e=>e.length>0;function q(e){return(t=u)=>N([...e,t])}function M(e){return(t=u)=>e.filter(s=>s!==t)}class P{constructor(){V(this,"_loaders",c([]))}get loaders(){return _(()=>this._loaders.value)}stop(t=u){this._loaders.value=M(this._loaders.value)(t)}start(t=u){return this._loaders.value=q(this._loaders.value)(t),()=>this.stop(t)}get anyLoading(){return _(()=>U(this._loaders.value))}isLoading(t=u){return _(()=>O(this._loaders.value)(t)).value}}new P;const E={name:"avatar",components:{Loading:S},data:()=>({loading:!0,file:null,lastImg:"default.png",seal_file:null,seal_lastImg:"default.png"}),methods:{loadData(){g.post("/api/avatar/get").then(e=>{this.loading=!1,this.lastImg=e.data}),g.post("/api/seal/get").then(e=>{this.loading=!1,this.seal_lastImg=e.data})},save(){this.loading=!0;const e=new FormData;e.append("bytes",this.file),g.post("/api/avatar/post",e,{headers:{"Content-Type":"multipart/form-data"}}).then(t=>{this.loading=!1,t.data=="e"?o.fire({text:"فرمت فایل اشتباه است.",icon:"warning",confirmButtonText:"قبول"}):t.data=="s"?o.fire({text:"حجم فایل ارسال باید کمتر از یک مگابایت باشد.",icon:"warning",confirmButtonText:"قبول"}):t.data=="is"?o.fire({text:"سایز تصویر نامناسب است و طول و عرض آن باید کمتر از 512 پیکسل باشد.",icon:"warning",confirmButtonText:"قبول"}):(o.fire({text:"نمایه با موفقیت تغییر یافت.",icon:"success",confirmButtonText:"قبول"}),this.loadData())})},seal_save(){this.loading=!0;const e=new FormData;e.append("bytes",this.seal_file),g.post("/api/seal/post",e,{headers:{"Content-Type":"multipart/form-data"}}).then(t=>{this.loading=!1,t.data=="e"?o.fire({text:"فرمت فایل اشتباه است.",icon:"warning",confirmButtonText:"قبول"}):t.data=="s"?o.fire({text:"حجم فایل ارسال باید کمتر از یک مگابایت باشد.",icon:"warning",confirmButtonText:"قبول"}):t.data=="is"?o.fire({text:"سایز تصویر نامناسب است و طول و عرض آن باید کمتر از 512 پیکسل باشد.",icon:"warning",confirmButtonText:"قبول"}):(o.fire({text:"مهر کسب‌و‌کار با موفقیت تغییر یافت.",icon:"success",confirmButtonText:"قبول"}),this.loadData())})},getImgSrc(){return x()+"/api/avatar/get/file/"+this.lastImg},selectedFile(e){this.file=e.target.files[0]},getSealImgSrc(){return x()+"/api/seal/get/file/"+this.seal_lastImg},seal_selectedFile(e){this.seal_file=e.target.files[0]}},beforeMount(){this.loadData()}},H=["src"],z={class:"input-group"},J=["disabled"],K=["src"],Q={class:"input-group"},R=["disabled"];function W(e,t,s,v,X,d){const w=i("v-btn"),B=i("v-tooltip"),F=i("v-spacer"),I=i("v-toolbar"),f=i("v-card-text"),m=i("v-card"),p=i("v-col"),b=i("v-row"),T=i("v-container");return $(),D(k,null,[l(I,{color:"toolbar",title:e.$t("drawer.avatar_settings")},{prepend:n(()=>[l(B,{text:e.$t("dialog.back"),location:"bottom"},{activator:n(({props:r})=>[l(w,A(r,{onClick:t[0]||(t[0]=Y=>e.$router.back()),class:"d-none d-sm-flex",variant:"text",icon:"mdi-arrow-right"}),null,16)]),_:1},8,["text"])]),default:n(()=>[l(F)]),_:1},8,["title"]),l(T,null,{default:n(()=>[l(b,null,{default:n(()=>[l(p,{cols:"12",sm:"4",md:"4"},{default:n(()=>[l(m,{title:e.$t("dialog.avatar_now")},{default:n(()=>[l(f,{class:"text-center"},{default:n(()=>[a("img",{class:"img-fluid",style:{"max-width":"10rem"},src:d.getImgSrc()},null,8,H)]),_:1})]),_:1},8,["title"])]),_:1}),l(p,{cols:"12",sm:"8",md:"8"},{default:n(()=>[l(m,{title:e.$t("dialog.avatar")},{default:n(()=>[l(f,null,{default:n(()=>[t[6]||(t[6]=a("ul",{class:"text-primary"},[a("li",null," نمایه یک تصویر است که در بالای فاکتورها و اسناد حسابداری قرار می گیرد. "),a("li",null," بهترین نمایش تصویر در لوگو و آرم‌های مربعی است "),a("li",null," حداکثر سایز 512 در 512 پیکسل است و بیشینه حجم فایل انتخابی نباید از ۱ مگابایت تجاوز کند. "),a("li",null," فرمت فایل قابل قبول jpg , jpeg , png است. ")],-1)),a("form",{onSubmit:t[2]||(t[2]=y(r=>d.save(),["prevent"]))},[a("div",z,[a("input",{type:"file",required:"",class:"form-control",onChange:t[1]||(t[1]=r=>d.selectedFile(r)),id:"avatarImgFile","aria-describedby":"inputGroupFileAddon04","aria-label":"Upload"},null,32),a("button",{disabled:e.loading,class:"btn btn-success",type:"submit",id:"inputGroupFileAddon04"},t[5]||(t[5]=[a("i",{class:"fa-solid fa-floppy-disk me-1"},null,-1),h(" ذخیره نمایه ")]),8,J)])],32)]),_:1})]),_:1},8,["title"])]),_:1})]),_:1}),l(b,null,{default:n(()=>[l(p,{cols:"12",sm:"4",md:"4"},{default:n(()=>[l(m,{title:e.$t("dialog.seal_now")},{default:n(()=>[l(f,{class:"text-center"},{default:n(()=>[a("img",{class:"img-fluid",style:{"max-width":"10rem"},src:d.getSealImgSrc()},null,8,K)]),_:1})]),_:1},8,["title"])]),_:1}),l(p,{cols:"12",sm:"8",md:"8"},{default:n(()=>[l(m,{title:e.$t("dialog.seal")},{default:n(()=>[l(f,null,{default:n(()=>[t[8]||(t[8]=a("ul",{class:"text-primary"},[a("li",null," مهر کسب و کار در پایین اسناد حسابداری از جمله فاکتور های فروش و ... درج می‌شود "),a("li",null," بهترین نتیجه ممکن در مهر های با پس زمینه سفید رنگ یا بدون رنگ است. "),a("li",null," حداکثر سایز 512 در 512 پیکسل است و بیشینه حجم فایل انتخابی نباید از ۱ مگابایت تجاوز کند. "),a("li",null," فرمت فایل قابل قبول jpg , jpeg , png است. ")],-1)),a("form",{onSubmit:t[4]||(t[4]=y(r=>d.seal_save(),["prevent"]))},[a("div",Q,[a("input",{type:"file",required:"",class:"form-control",onChange:t[3]||(t[3]=r=>d.seal_selectedFile(r)),id:"sealImgFile","aria-describedby":"inputGroupFileAddon04","aria-label":"Upload"},null,32),a("button",{disabled:e.loading,class:"btn btn-success",type:"submit",id:"inputGroupFileAddon04"},t[7]||(t[7]=[a("i",{class:"fa-solid fa-floppy-disk me-1"},null,-1),h(" ذخیره مهر ")]),8,R)])],32)]),_:1})]),_:1},8,["title"])]),_:1})]),_:1})]),_:1})],64)}const et=C(E,[["render",W]]);export{et as default};
