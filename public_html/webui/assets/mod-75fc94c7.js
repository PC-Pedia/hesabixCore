import{_ as L,L as U,l as q,a as l,S as m}from"./main-9b36f05f.js";import{q as C}from"./quickAdd-3f821e67.js";import{q as B,a as $}from"./quickAddCommodity-50dce749.js";import{m as Y}from"./mostdes-26bfade0.js";import{a as d,o as b,s as f,e as s,d as a,u as i,ao as A,B as M,b as n,c as T,A as v,w as p,ab as c,t as k}from"./vendor-adef9cb4.js";import"./vue3-treeselect.common-f8cf97d9.js";/* empty css                        */const j={name:"mod",components:{Loading:U,Money3:q,quickView:B,quickAdd:C,quickAddCommodity:$,mostdes:Y},data:()=>({isLoading:!0,desSubmit:{id:"",des:""},data:{update:"",date:"",dateOut:"",color:"",model:"",des:"",person:{nikename:"",mobile:"",code:"0"},pelak:"",serial:"",sms:!1,motaleghat:"",commodity:{id:"",name:"",unit:"",unitData:{name:"",floatNumber:0}}},year:"",persons:[],commodity:[]}),mounted(){this.loadData(this.$route.params.id)},beforeRouteUpdate(t,o){this.loadData(t.params.id)},methods:{searchPerson(t,o){o(!0),l.post("/api/person/list/search",{search:t}).then(r=>{this.persons=r.data,o(!1)})},searchCommodity(t,o){o(!0),l.post("/api/commodity/list/search",{search:t}).then(r=>{this.commodity=r.data,o(!1)})},loadData(){this.$route.params.id==""&&l.post("/api/year/get").then(t=>{this.data.date=t.data.now}),l.post("/api/person/list/search").then(t=>{this.persons=t.data}),l.post("/api/commodity/list/search").then(t=>{this.commodity=t.data}),this.$route.params.id!=""&&l.post("/api/repservice/order/info/"+this.$route.params.id).then(t=>{this.data=t.data}),this.isLoading=!1},save(){let t=!0;this.isLoading=!0,this.data.commodity==null||this.data.commodity.id==""||this.data.commodity.id==null?(m.fire({text:"کالا انتخاب نشده است.",icon:"error",confirmButtonText:"قبول"}),t=!1):(this.data.person==null||this.data.person.code=="0"||this.data.person.code==null)&&(m.fire({text:"شخص انتخاب نشده است.",icon:"error",confirmButtonText:"قبول"}),t=!1),t==!0?l.post("/api/plug/repservice/order/mod",this.data).then(o=>{this.isLoading=!1,o.data.code=="0"?m.fire({text:"درخواست ثبت شد.",icon:"success",confirmButtonText:"قبول"}).then(r=>{this.$router.push("/acc/plugin/repservice/order/list")}):o.data.code=="11"?m.fire({text:" درخواست ثبت شد.اما به دلیل کمبود اعتبار پیامک ارسال نشد.",icon:"warning",confirmButtonText:"قبول"}).then(r=>{this.$router.push("/acc/plugin/repservice/order/list")}):m.fire({text:o.data.message,icon:"error",confirmButtonText:"قبول"})}):this.isLoading=!1}},watch:{"desSubmit.id":function(){this.data.des=this.desSubmit.des},"data.person":function(){this.data.person.mobile==""?this.data.sms=!1:this.data.sms=!0}}},N={class:"block block-content-full"},P={id:"fixed-header",class:"block-header block-header-default bg-gray-light pt-2 pb-1"},E={class:"block-title text-primary-dark"},O={class:"block-options"},R={class:"form-check form-switch form-check-inline"},z=["disabled"],F=["disabled"],G={class:"spinner-grow spinner-grow-sm me-2",role:"status"},H={class:"block-content py-3 vl-parent px-0"},I={class:"container"},J={class:"row"},K={class:"col-sm-12 col-md-4 mb-1"},Q={class:"block block-rounded border"},W={class:"block-content pt-1 px-1"},X={class:"col-sm-12 col-md-4 mb-1"},Z={class:"block block-rounded border"},ss={class:"block-header block-header-default py-1"},os={class:"block-options"},ts={class:"block-content pt-1 px-1"},es={class:"row mb-1"},as={class:"col-6"},is={key:0,class:"col-6"},ls={class:"col-sm-12 col-md-4 mb-1"},ds={class:"block block-rounded border"},ns={class:"block-header block-header-default py-1"},rs={class:"block-options"},cs={class:"block-content pt-1 px-1"},ms={class:"row mb-1"},ps={class:"col-12"},us={class:"col-sm-12 col-md-6"},bs={class:"block block-rounded border"},ks={class:"block-header block-header-default py-1"},hs={class:"block-options"},fs={class:"block-content p-0"},vs={class:"col-sm-12 col-md-6 mb-2"},ys={class:"block block-rounded border"},_s={class:"block-content p-0"},gs={class:"container"},xs={class:"row"},Vs={class:"col-sm-6 col-md-4 mb-2"},ws={class:"block block-rounded border"},Ss={class:"block-content p-0"},Ds={class:"col-sm-6 col-md-4 mb-2"},Ls={class:"block block-rounded border"},Us={class:"block-content p-0"},qs={class:"col-sm-6 col-md-4 mb-2"},Cs={class:"block block-rounded border"},Bs={class:"block-content p-0"},$s={class:"col-sm-6 col-md-4 mb-2"},Ys={class:"block block-rounded border"},As={class:"block-content p-0"};function Ms(t,o,r,Ts,js,u){const y=d("loading"),_=d("date-picker"),g=d("quickView"),x=d("quickAdd"),h=d("v-cob"),V=d("quickAddCommodity"),w=d("mostdes");return b(),f("div",N,[s("div",P,[s("h3",E,[s("button",{onClick:o[0]||(o[0]=e=>t.$router.back()),type:"button",class:"float-start d-none d-sm-none d-md-block btn btn-sm btn-link text-warning"},o[13]||(o[13]=[s("i",{class:"fa fw-bold fa-arrow-right"},null,-1)])),o[14]||(o[14]=a(" قبض تحویل "))]),s("div",O,[s("span",R,[i(s("input",{disabled:this.data.person.mobile=="","onUpdate:modelValue":o[1]||(o[1]=e=>t.data.sms=e),class:"form-check-input",type:"checkbox"},null,8,z),[[A,t.data.sms]]),o[15]||(o[15]=s("label",{class:"form-check-label"}," پیامک",-1))]),s("button",{disabled:t.isLoading,onClick:o[2]||(o[2]=e=>u.save()),type:"button",class:"btn btn-sm btn-alt-primary"},[i(s("div",G,o[16]||(o[16]=[s("span",{class:"visually-hidden"},"Loading...",-1)]),512),[[M,this.isLoading]]),o[17]||(o[17]=s("i",{class:"fa fa-floppy-disk"},null,-1)),o[18]||(o[18]=a(" ثبت "))],8,F)])]),s("div",H,[n(y,{color:"blue",loader:"dots",active:t.isLoading,"onUpdate:active":o[3]||(o[3]=e=>t.isLoading=e),"is-full-page":!1},null,8,["active"]),s("div",I,[s("div",J,[s("div",K,[s("div",Q,[o[19]||(o[19]=s("div",{class:"block-header block-header-default py-1"},[s("h3",{class:"block-title text-primary"},[s("i",{class:"fa fa-calendar"}),a(" تاریخ ")]),s("div",{class:"block-options"})],-1)),s("div",W,[s("p",null,[n(_,{class:"my-0 py-0",modelValue:t.data.date,"onUpdate:modelValue":o[4]||(o[4]=e=>t.data.date=e),format:"jYYYY/jMM/jDD","display-format":"jYYYY/jMM/jDD",min:t.year.start,max:t.year.end},null,8,["modelValue","min","max"])])])])]),s("div",X,[s("div",Z,[s("div",ss,[o[20]||(o[20]=s("h3",{class:"block-title text-primary"},[s("i",{class:"fa fa-person"}),a(" مشتری ")],-1)),s("div",os,[this.data.person!=null&&this.data.person.code!="0"?(b(),T(g,{key:0,code:this.data.person.code},null,8,["code"])):v("",!0),n(x,{code:"0"})])]),s("div",ts,[n(h,{class:"mb-1 mx-0",filterable:!1,dir:"rtl",onSearch:u.searchPerson,options:t.persons,label:"nikename",modelValue:t.data.person,"onUpdate:modelValue":o[5]||(o[5]=e=>t.data.person=e)},{"no-options":p(({search:e,searching:S,loading:D})=>o[21]||(o[21]=[a(" نتیجه‌ای یافت نشد! ")])),option:p(e=>[s("div",es,[s("div",as,[o[22]||(o[22]=s("i",{class:"fa fa-user me-2"},null,-1)),a(" "+k(e.nikename),1)]),e.mobile!=""?(b(),f("div",is,[o[23]||(o[23]=s("i",{class:"fa fa-phone me-2 text-success"},null,-1)),a(" "+k(e.mobile),1)])):v("",!0)])]),_:1},8,["onSearch","options","modelValue"])])])]),s("div",ls,[s("div",ds,[s("div",ns,[o[24]||(o[24]=s("h3",{class:"block-title text-primary"},[s("i",{class:"fa fa-box pe-2"}),a(" کالا و خدمات ")],-1)),s("div",rs,[n(V)])]),s("div",cs,[n(h,{dir:"rtl",onSearch:u.searchCommodity,options:t.commodity,label:"name",modelValue:t.data.commodity,"onUpdate:modelValue":o[6]||(o[6]=e=>t.data.commodity=e),class:""},{"no-options":p(({search:e,searching:S,loading:D})=>o[25]||(o[25]=[a(" نتیجه‌ای یافت نشد! ")])),option:p(e=>[s("div",ms,[s("div",ps,[o[26]||(o[26]=s("i",{class:"fa fa-box me-1"},null,-1)),a(" "+k(e.name),1)])])]),_:1},8,["onSearch","options","modelValue"])])])]),s("div",us,[s("div",bs,[s("div",ks,[o[27]||(o[27]=s("h3",{class:"block-title text-primary"},[s("i",{class:"fa-regular fa-note-sticky"}),a(" شرح ")],-1)),s("div",hs,[n(w,{submitData:t.desSubmit,type:"repservice"},null,8,["submitData"])])]),s("div",fs,[i(s("input",{"onUpdate:modelValue":o[7]||(o[7]=e=>t.data.des=e),class:"form-control",type:"text"},null,512),[[c,t.data.des]])])])]),s("div",vs,[s("div",ys,[o[28]||(o[28]=s("div",{class:"block-header block-header-default py-1"},[s("h3",{class:"block-title text-primary"},[s("i",{class:"fa-regular fa-note-sticky"}),a(" متعلقات ")]),s("div",{class:"block-options"})],-1)),s("div",_s,[i(s("input",{"onUpdate:modelValue":o[8]||(o[8]=e=>this.data.motaleghat=e),class:"form-control",type:"text"},null,512),[[c,this.data.motaleghat]])])])])])]),s("div",gs,[s("div",xs,[s("div",Vs,[s("div",ws,[o[29]||(o[29]=s("div",{class:"block-header block-header-default py-1"},[s("h3",{class:"block-title text-primary"},[s("i",{class:"fa-regular fa-note-sticky"}),a(" مدل ")]),s("div",{class:"block-options"})],-1)),s("div",Ss,[i(s("input",{"onUpdate:modelValue":o[9]||(o[9]=e=>this.data.model=e),class:"form-control",type:"text"},null,512),[[c,this.data.model]])])])]),s("div",Ds,[s("div",Ls,[o[30]||(o[30]=s("div",{class:"block-header block-header-default py-1"},[s("h3",{class:"block-title text-primary"},[s("i",{class:"fa-regular fa-note-sticky"}),a(" رنگ ")]),s("div",{class:"block-options"})],-1)),s("div",Us,[i(s("input",{"onUpdate:modelValue":o[10]||(o[10]=e=>this.data.color=e),class:"form-control",type:"text"},null,512),[[c,this.data.color]])])])]),s("div",qs,[s("div",Cs,[o[31]||(o[31]=s("div",{class:"block-header block-header-default py-1"},[s("h3",{class:"block-title text-primary"},[s("i",{class:"fa-regular fa-note-sticky"}),a(" سریال ")]),s("div",{class:"block-options"})],-1)),s("div",Bs,[i(s("input",{"onUpdate:modelValue":o[11]||(o[11]=e=>this.data.serial=e),class:"form-control",type:"text"},null,512),[[c,this.data.serial]])])])]),s("div",$s,[s("div",Ys,[o[32]||(o[32]=s("div",{class:"block-header block-header-default py-1"},[s("h3",{class:"block-title text-primary"},[s("i",{class:"fa-regular fa-note-sticky"}),a(" پلاک ")]),s("div",{class:"block-options"})],-1)),s("div",As,[i(s("input",{"onUpdate:modelValue":o[12]||(o[12]=e=>this.data.pelak=e),class:"form-control",type:"text"},null,512),[[c,this.data.pelak]])])])])])])])])}const Gs=L(j,[["render",Ms]]);export{Gs as default};
