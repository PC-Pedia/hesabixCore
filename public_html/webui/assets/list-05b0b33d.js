import{_ as V,a as T}from"./main-9b36f05f.js";import{a as n,o as C,s as z,b as e,w as o,F as D,_ as c,d as r,t as b}from"./vendor-adef9cb4.js";const B={name:"list",data(){return{loading:!0,items:[],activeTab:null,headers:[{title:"",key:"operation",align:"center",sortable:!1},{title:"شناسه",key:"id",align:"center",sortable:!0},{title:"کسب‌وکار",key:"bid.name",align:"center",sortable:!0,value:t=>t.bid?t.bid.name:"بدون کسب‌وکار"},{title:"عنوان",key:"title",align:"center",sortable:!0},{title:"تاریخ",key:"dateSubmit",align:"center",sortable:!0}]}},computed:{pendingItems(){return this.items.filter(t=>t.state==="در حال پیگیری")},respondedItems(){return this.items.filter(t=>t.state==="پاسخ داده شده")},closedItems(){return this.items.filter(t=>t.state==="خاتمه یافته")}},mounted(){this.loadData()},methods:{loadData(){T.post("/api/support/list").then(t=>{this.items=t.data,this.loading=!1,this.activeTab=this.pendingItems.length>0?"pending":"responded"}).catch(t=>{console.error("Error loading support list:",t),this.loading=!1})}}};function E(t,a,F,N,l,s){const w=n("v-spacer"),m=n("v-btn"),p=n("v-tooltip"),x=n("v-toolbar"),u=n("v-icon"),v=n("v-tab"),y=n("v-tabs"),_=n("v-data-table"),g=n("v-window-item"),h=n("v-window"),k=n("v-card"),I=n("v-container");return C(),z(D,null,[e(x,{color:"toolbar",title:t.$t("pages.support.titlebar")},{default:o(()=>[e(w),e(p,{text:t.$t("user.ticket_new"),location:"bottom"},{activator:o(({props:i})=>[e(m,c(i,{icon:"mdi-chat-plus",color:"primary",to:"/profile/support-new"}),null,16)]),_:1},8,["text"])]),_:1},8,["title"]),e(I,{class:"pa-0 ma-0"},{default:o(()=>[e(k,{loading:l.loading?"red":null,disabled:l.loading},{default:o(()=>[e(y,{modelValue:l.activeTab,"onUpdate:modelValue":a[0]||(a[0]=i=>l.activeTab=i),color:"primary",grow:""},{default:o(()=>[e(v,{value:"pending",class:"flex-grow-1"},{default:o(()=>[e(u,{start:""},{default:o(()=>a[5]||(a[5]=[r("mdi-progress-clock")])),_:1}),r(" در حال پیگیری ("+b(s.pendingItems.length)+") ",1)]),_:1}),e(v,{value:"responded",class:"flex-grow-1"},{default:o(()=>[e(u,{start:""},{default:o(()=>a[6]||(a[6]=[r("mdi-check-circle")])),_:1}),r(" پاسخ داده شده ("+b(s.respondedItems.length)+") ",1)]),_:1}),e(v,{value:"closed",class:"flex-grow-1"},{default:o(()=>[e(u,{start:""},{default:o(()=>a[7]||(a[7]=[r("mdi-lock")])),_:1}),r(" خاتمه یافته ("+b(s.closedItems.length)+") ",1)]),_:1})]),_:1},8,["modelValue"]),e(h,{modelValue:l.activeTab,"onUpdate:modelValue":a[4]||(a[4]=i=>l.activeTab=i)},{default:o(()=>[e(g,{value:"pending"},{default:o(()=>[e(_,{headers:l.headers,items:s.pendingItems,loading:l.loading,"no-data-text":t.$t("table.no_data"),class:"elevation-1"},{"item.operation":o(({item:i})=>[e(p,{text:t.$t("dialog.view"),location:"bottom"},{activator:o(({props:d})=>[e(m,c(d,{color:"primary",icon:"mdi-eye",size:"x-small",variant:"flat",to:"/profile/support-view/"+i.id,onClick:a[1]||(a[1]=f=>l.loading=!0)}),null,16,["to"])]),_:2},1032,["text"])]),_:1},8,["headers","items","loading","no-data-text"])]),_:1}),e(g,{value:"responded"},{default:o(()=>[e(_,{headers:l.headers,items:s.respondedItems,loading:l.loading,"no-data-text":t.$t("table.no_data"),class:"elevation-1"},{"item.operation":o(({item:i})=>[e(p,{text:t.$t("dialog.view"),location:"bottom"},{activator:o(({props:d})=>[e(m,c(d,{color:"primary",icon:"mdi-eye",size:"x-small",variant:"flat",to:"/profile/support-view/"+i.id,onClick:a[2]||(a[2]=f=>l.loading=!0)}),null,16,["to"])]),_:2},1032,["text"])]),_:1},8,["headers","items","loading","no-data-text"])]),_:1}),e(g,{value:"closed"},{default:o(()=>[e(_,{headers:l.headers,items:s.closedItems,loading:l.loading,"no-data-text":t.$t("table.no_data"),class:"elevation-1"},{"item.operation":o(({item:i})=>[e(p,{text:t.$t("dialog.view"),location:"bottom"},{activator:o(({props:d})=>[e(m,c(d,{color:"primary",icon:"mdi-eye",size:"x-small",variant:"flat",to:"/profile/support-view/"+i.id,onClick:a[3]||(a[3]=f=>l.loading=!0)}),null,16,["to"])]),_:2},1032,["text"])]),_:1},8,["headers","items","loading","no-data-text"])]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["loading","disabled"])]),_:1})],64)}const P=V(B,[["render",E],["__scopeId","data-v-2a463003"]]);export{P as default};
