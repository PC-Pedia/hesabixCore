import{r as v,a as u,o as g,s as k,e,d as o,b as l,w as i,u as w,ab as x,t as c}from"./vendor-adef9cb4.js";import{_ as y,a as p,S as f}from"./main-9b36f05f.js";const _={name:"list",data:()=>({sumSelected:0,sumTotal:0,itemsSelected:[],searchValue:"",loading:v(!0),items:[],headers:[{text:"عملیات",value:"operation",width:"120"},{text:"کد",value:"code",width:"80"},{text:"تاریخ",value:"date"},{text:"شرح",value:"des"},{text:"مبلغ",value:"amount"}]}),methods:{loadData(){p.post("/api/accounting/search",{type:"income"}).then(s=>{this.items=s.data,this.items.forEach(t=>{t.amount=this.$filters.formatNumber(t.amount),this.sumTotal+=parseInt(t.amount.replaceAll(",",""))}),this.loading=!1})},deleteItem(s){f.fire({text:"آیا برای این سند مطمئن هستید؟",showCancelButton:!0,confirmButtonText:"بله",cancelButtonText:"خیر"}).then(t=>{t.isConfirmed&&p.post("/api/accounting/remove",{code:s}).then(n=>{if(n.data.result==1){let m=0;for(let d=0;d<this.items.length;d++)m++,this.items[d].code==s&&this.items.splice(m-1,1);f.fire({text:"سند با موفقیت حذف شد.",icon:"success",confirmButtonText:"قبول"})}})})}},beforeMount(){this.loadData()},watch:{itemsSelected:{handler:function(s,t){this.sumSelected=0,this.itemsSelected.forEach(n=>{this.sumSelected+=parseInt(n.amount.replaceAll(",",""))})},deep:!0}}},S={class:"block block-content-full"},T={id:"fixed-header",class:"block-header block-header-default bg-gray-light pt-2 pb-1"},V={class:"block-options"},$={class:"block-content pt-1 pb-3"},N={class:"row"},B={class:"col-sm-12 col-md-12 m-0 p-0"},M={class:"mb-1"},C={class:"input-group input-group-sm"},D={class:"dropdown-center"},E={"aria-labelledby":"dropdown-align-center-outline-primary",class:"dropdown-menu dropdown-menu-end",style:{}},A=["onClick"],I={class:"container-fluid p-0 mx-0 my-3"},P={class:"block block-rounded block-link-shadow border-start border-success border-3",href:"javascript:void(0)"},z={class:"block-content block-content-full block-content-sm bg-body-light"},U={class:"row"},j={class:"col-sm-6 com-md-6"},O={class:"text-primary"},q={class:"col-sm-6 com-md-6"},F={class:"text-primary"};function G(s,t,n,m,d,h){const r=u("router-link"),b=u("EasyDataTable");return g(),k("div",S,[e("div",T,[t[3]||(t[3]=e("h3",{class:"block-title text-primary-dark"},[e("i",{class:"mx-2 fa fa-cash-register"}),o(" درآمدها ")],-1)),e("div",V,[l(r,{to:"/acc/incomes/mod/",class:"block-options-item"},{default:i(()=>t[2]||(t[2]=[e("span",{class:"fa fa-plus fw-bolder"},null,-1)])),_:1})])]),e("div",$,[e("div",N,[e("div",B,[e("div",M,[e("div",C,[t[4]||(t[4]=e("span",{class:"input-group-text"},[e("i",{class:"fa fa-search"})],-1)),w(e("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>s.searchValue=a),class:"form-control",type:"text",placeholder:"جست و جو ..."},null,512),[[x,s.searchValue]])])]),l(b,{"table-class-name":"customize-table","items-selected":s.itemsSelected,"onUpdate:itemsSelected":t[1]||(t[1]=a=>s.itemsSelected=a),"show-index":"",alternating:"","search-value":s.searchValue,headers:s.headers,items:s.items,"theme-color":"#1d90ff","header-text-direction":"center","body-text-direction":"center",rowsPerPageMessage:"تعداد سطر",emptyMessage:"اطلاعاتی برای نمایش وجود ندارد",rowsOfPageSeparatorMessage:"از",loading:s.loading},{"item-operation":i(({code:a})=>[e("div",D,[t[9]||(t[9]=e("button",{"aria-expanded":"false","aria-haspopup":"true",class:"btn btn-sm btn-link","data-bs-toggle":"dropdown",id:"dropdown-align-center-alt-primary",type:"button"},[e("i",{class:"fa-solid fa-ellipsis"})],-1)),e("div",E,[l(r,{class:"dropdown-item",to:"/acc/accounting/view/"+a},{default:i(()=>t[5]||(t[5]=[e("i",{class:"fa fa-file pe-2 text-primary"},null,-1),o(" سند حسابداری ")])),_:2},1032,["to"]),l(r,{class:"dropdown-item",to:{name:"incomes_mod",params:{id:a}}},{default:i(()=>t[6]||(t[6]=[e("i",{class:"fa fa-eye pe-2 text-success"},null,-1),o(" مشاهده ")])),_:2},1032,["to"]),l(r,{class:"dropdown-item",to:{name:"incomes_mod",params:{id:a}}},{default:i(()=>t[7]||(t[7]=[e("i",{class:"fa fa-edit pe-2"},null,-1),o(" ویرایش ")])),_:2},1032,["to"]),e("button",{type:"button",onClick:H=>h.deleteItem(a),class:"dropdown-item text-danger"},t[8]||(t[8]=[e("i",{class:"fa fa-trash pe-2"},null,-1),o(" حذف ")]),8,A)])])]),_:1},8,["items-selected","search-value","headers","items","loading"]),e("div",I,[e("a",P,[e("div",z,[e("div",U,[e("div",j,[t[10]||(t[10]=e("span",{class:"text-dark"},[e("i",{class:"fa fa-list-dots"}),o(" مبلغ کل: ")],-1)),e("span",O,c(s.$filters.formatNumber(this.sumTotal))+" "+c(s.$filters.getActiveMoney().shortName),1)]),e("div",q,[t[11]||(t[11]=e("span",{class:"text-dark"},[e("i",{class:"fa fa-list-check"}),o(" جمع مبلغ موارد انتخابی: ")],-1)),e("span",F,c(s.$filters.formatNumber(this.sumSelected))+" "+c(s.$filters.getActiveMoney().shortName),1)])])])])])])])])])}const L=y(_,[["render",G]]);export{L as default};
