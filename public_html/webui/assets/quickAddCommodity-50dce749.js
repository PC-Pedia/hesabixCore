import{L as D,a as v,_ as N,l as I,S as V}from"./main-9b36f05f.js";import{h as S,a as i,o as d,s as n,c as T,A as p,b as l,w as m,d as e,t as a,e as u,F as g,C as A,u as r,ab as b,_ as P,as as U,ao as L,au as B}from"./vendor-adef9cb4.js";import{T as K}from"./vue3-treeselect.common-f8cf97d9.js";/* empty css                        */const R=S({name:"quickView",props:{code:{type:String},btn:{default:!0,type:Boolean}},components:{Loading:D},data:()=>({isLoading:!0,dialog:!1,selectedPerson:{accounts:[]}}),methods:{loadData(){this.isLoading=!0,this.$props.code!=null&&v.post("/api/person/info/"+this.$props.code).then(t=>{this.isLoading=!1,this.selectedPerson=t.data})}},mounted(){this.loadData()}}),z={class:"row"},j={class:"col-sm-12 col-md-6 mb-2"},G={class:"fw-bold mb-2"},H={class:"text-primary"},J={class:"fw-bold mb-2"},Q={class:"text-primary"},W={class:"fw-bold mb-2"},X={class:"text-primary"},Y={class:"fw-bold mb-2"},Z={class:"text-primary"},x={class:"fw-bold mb-2"},ss={class:"text-primary"},us={class:"fw-bold mb-2"},ts={class:"text-primary"},os={class:"fw-bold mb-2"},ls={class:"text-primary"},es={class:"fw-bold mb-2"},as={class:"text-primary"},is={class:"col-sm-12 col-md-6 mb-2"},ds={class:"card-body"},ns={class:"fw-bold mb-2"},rs={key:0,class:"text-success"},ms={key:1,class:"text-danger"},cs={key:2,class:"text-dark"},ps={class:"fw-bold mb-2"},fs={class:"text-primary"},bs={class:"fw-bold mb-2"},Cs={class:"text-primary"},vs={class:"fw-bold mb-2"},gs={class:"text-primary"},ys={key:0,class:"row"},hs={class:"col-12"},As={class:"block block-rounded bg-light mb-1"},$s={class:"block-header"},ks={class:"block-title"},_s={class:"block-content pt-0"},Fs={class:"list-group mb-1"},ws={class:"list-group-item"},Vs={class:"list-group-item"};function Ps(t,s,E,M,O,q){const C=i("v-btn"),h=i("v-toolbar-title"),$=i("v-spacer"),k=i("v-toolbar-items"),_=i("v-toolbar"),y=i("Loading"),F=i("v-col"),w=i("v-row"),o=i("v-card"),f=i("v-dialog");return d(),n(g,null,[t.$props.btn==!0?(d(),T(C,{key:0,disabled:this.$props.code==null,onClick:s[0]||(s[0]=c=>{t.loadData(),t.dialog=!0}),icon:"mdi-eye",class:"text-primary",variant:"plain",density:"compact",size:"small",title:t.$t("dialog.user_info")},null,8,["disabled","title"])):p("",!0),l(f,{modelValue:t.dialog,"onUpdate:modelValue":s[3]||(s[3]=c=>t.dialog=c),transition:"dialog-bottom-transition",fullscreen:""},{default:m(()=>[l(o,{class:"bg-white"},{default:m(()=>[l(_,null,{default:m(()=>[l(C,{icon:"mdi-close",onClick:s[1]||(s[1]=c=>t.dialog=!1)}),l(h,null,{default:m(()=>[e(a(t.$t("dialog.user_info")),1)]),_:1}),l($),l(k)]),_:1}),l(w,{class:"pa-3"},{default:m(()=>[l(F,null,{default:m(()=>[l(y,{color:"blue",loader:"dots",active:t.isLoading,"onUpdate:active":s[2]||(s[2]=c=>t.isLoading=c),"is-full-page":!1},null,8,["active"]),u("div",z,[u("div",j,[u("div",G,[s[4]||(s[4]=e("کد حسابداری: ")),u("small",H,a(t.selectedPerson.code),1)]),u("div",J,[s[5]||(s[5]=e("نام مستعار: ")),u("small",Q,a(t.selectedPerson.nikename),1)]),u("div",W,[s[6]||(s[6]=e("نام و نام خانوادگی: ")),u("small",X,a(t.selectedPerson.name),1)]),u("div",Y,[s[7]||(s[7]=e("تلفن: ")),u("small",Z,a(t.selectedPerson.tel),1)]),u("div",x,[s[8]||(s[8]=e("موبایل: ")),u("small",ss,a(t.selectedPerson.mobile),1)]),u("div",us,[s[9]||(s[9]=e("موبایل دوم: ")),u("small",ts,a(t.selectedPerson.mobile2),1)]),u("div",os,[s[10]||(s[10]=e("آدرس: ")),u("small",ls,a(t.selectedPerson.keshvar+" "+t.selectedPerson.ostan+" "+t.selectedPerson.shahr+" "+t.selectedPerson.address),1)]),u("div",es,[s[11]||(s[11]=e("توضیحات: ")),u("small",as,a(t.selectedPerson.des),1)])]),u("div",is,[u("div",ds,[u("div",ns,[s[12]||(s[12]=e(" وضعیت حسابداری: ")),t.selectedPerson.balance>0?(d(),n("b",rs,"بستانکار")):p("",!0),t.selectedPerson.balance<0?(d(),n("b",ms,"بدهکار")):p("",!0),t.selectedPerson.balance==0?(d(),n("b",cs,"تسویه شده")):p("",!0)]),u("div",ps,[s[13]||(s[13]=e("بستانکار: ")),u("small",fs,a(this.$filters.formatNumber(t.selectedPerson.bs)),1)]),u("div",bs,[s[14]||(s[14]=e("بدهکار: ")),u("small",Cs,a(this.$filters.formatNumber(t.selectedPerson.bd)),1)]),u("div",vs,[s[15]||(s[15]=e("تراز حسابداری: ")),u("small",gs,a(this.$filters.formatNumber(t.selectedPerson.balance)),1)])])])]),this.selectedPerson.accounts.length!=0?(d(),n("div",ys,[u("div",hs,[s[18]||(s[18]=u("h4",{class:"text-primary"},"حساب‌های بانکی",-1)),(d(!0),n(g,null,A(t.selectedPerson.accounts,c=>(d(),n("div",As,[u("div",$s,[u("h3",ks,[e(a(c.bank)+" ",1),u("small",null,a(c.accountNum),1)])]),u("div",_s,[u("ul",Fs,[u("li",ws,[s[16]||(s[16]=u("span",{class:"text-muted"},"شماره کارت:",-1)),e(" "+a(c.cardNum),1)]),u("li",Vs,[s[17]||(s[17]=u("span",{class:"text-muted"},"شماره شبا:",-1)),e(" "+a(c.shabaNum),1)])])])]))),256))])])):p("",!0)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}const Du=N(R,[["render",Ps]]),Ls=S({name:"quickAddCommodity",props:{code:{type:String},btn:{default:!0,type:Boolean}},components:{Treeselect:K,Loading:D,Money3:I},data:()=>({tabs:0,dialog:!1,loading:!0,plugins:[],units:"",priceList:[],data:{name:"",priceSell:0,priceBuy:0,des:"",unit:"عدد",code:0,khadamat:!1,cat:null,orderPoint:0,commodityCountCheck:!1,minOrderCount:1,dayLoading:0,speedAccess:!1,withoutTax:!1,barcodes:"",prices:[]},dataPattern:{name:"",priceSell:0,priceBuy:0,des:"",unit:"عدد",code:0,khadamat:!1,cat:null,orderPoint:0,commodityCountCheck:!1,minOrderCount:1,dayLoading:0,speedAccess:!1,withoutTax:!1,barcodes:"",prices:[]},listCats:[],currencyConfig:{masked:!1,prefix:"",suffix:"ریال",thousands:",",decimal:".",precision:0,disableNegative:!1,disabled:!1,min:0,max:null,allowBlank:!1,minimumNumberOfCharacters:0,shouldRound:!0,focusOnRight:!1}}),methods:{isPluginActive(t){return this.plugins[t]!==void 0},refreshPriceList(){v.post("/api/commodity/pricelist/list").then(t=>{t.data.length==0?this.data.prices=[]:(this.priceList=t.data,this.priceList.forEach(s=>{this.data.prices.push({id:0,priceBuy:0,priceSell:0,list:s})}))})},loadData(){this.loading=!0,v.post("/api/plugin/get/actives").then(t=>{this.plugins=t.data,this.loading=!1}),v.post("/api/commodity/units").then(t=>{this.units=t.data}),this.refreshPriceList(),v.post("/api/commodity/cat/get/line").then(t=>{this.listCats=t.data,this.$route.params.id||(this.data.cat=t.data[1])})},save(){this.data.name.length===0?V.fire({text:"نام کالا یا خدمات الزامی است.",icon:"error",confirmButtonText:"قبول"}):(this.loading=!0,v.post("/api/commodity/mod/"+this.data.code,this.data).then(t=>{this.loading=!1,t.data.result==2?V.fire({text:"قبلا ثبت شده است.",icon:"error",confirmButtonText:"قبول"}):V.fire({text:"مشخصات کالا و خدمات ثبت شد.",icon:"success",confirmButtonText:"قبول"}).then(()=>{this.dialog=!1,this.data={...this.dataPattern},this.refreshPriceList()})}))}},mounted(){this.loadData()}}),Us={class:"modal modal-lg fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:"pricesModal",tabindex:"-1","aria-labelledby":"pricesModalLabel","aria-hidden":"true"},Bs={class:"modal-dialog"},Ds={class:"modal-content"},Ns={class:"modal-body"},Ss={class:"row"},Ts={class:"col-sm-12 col-md-12"},Es={class:"row"},Ms={class:"col-sm-6 col-md-6"},Os={class:"form-floating mb-3"},qs=["onUpdate:modelValue"],Is={class:"col-sm-6 col-md-6"},Ks={class:"form-floating mb-3"},Rs={key:0,class:"col-sm-12 col-md-12"},zs={class:"container"},js={class:"row py-3"},Gs={class:"col-sm-12 col-md-12 mb-1"},Hs={class:"form-check form-check-inline"},Js={class:"form-check form-check-inline"},Qs={class:"col-sm-6 col-md-6 mb-1"},Ws={class:"space-y-2"},Xs={class:"form-check form-switch"},Ys={class:"col-sm-6 col-md-6 mb-1"},Zs={class:"space-y-2"},xs={class:"form-check form-switch"},su={class:"row"},uu={class:"col-sm-12 col-md-6"},tu={class:"form-floating mb-4"},ou={class:"form-floating mb-4"},lu=["value"],eu={class:"col-sm-12 col-md-6"},au={class:"form-floating mb-4"},iu={class:"input-group mb-3"},du={key:0,class:"input-group-text bg-alt-primary",type:"button",title:"لیست قیمت‌ها","data-bs-toggle":"modal","data-bs-target":"#pricesModal"},nu={class:"form-floating"},ru={class:"col-sm-12 col-md-12 mb-4"},mu=["value"],cu={class:"row mx-0 px-0"},pu={class:"col-sm-12 col-md-12"},fu={class:"form-floating mb-4"},bu={class:"col-sm-12 col-md-12"},Cu={class:"form-floating mb-4"},vu={class:"col-sm-12 col-md-12"},gu={class:"space-y-2"},yu={class:"form-check form-switch"},hu={class:"row"},Au={class:"col-sm-12 col-md-4 mt-2"},$u={class:"form-floating mb-4"},ku={class:"col-sm-12 col-md-4 mt-2"},_u={class:"form-floating mb-4"},Fu={class:"col-sm-12 col-md-4 mt-2"},wu={class:"form-floating mb-4"};function Vu(t,s,E,M,O,q){const C=i("v-btn"),h=i("v-tooltip"),$=i("v-spacer"),k=i("v-icon"),_=i("v-toolbar"),y=i("money3"),F=i("v-card"),w=i("v-dialog");return d(),n(g,null,[t.$props.btn==!0?(d(),T(C,{key:0,onClick:s[0]||(s[0]=o=>t.dialog=!0),icon:"mdi-plus",class:"text-primary",variant:"plain",density:"compact",title:t.$t("dialog.new")},null,8,["title"])):p("",!0),l(w,{modelValue:t.dialog,"onUpdate:modelValue":s[22]||(s[22]=o=>t.dialog=o),transition:"dialog-bottom-transition",fullscreen:""},{default:m(()=>[l(F,{class:"bg-white",loading:t.loading},{default:m(()=>[l(_,{color:"toolbar",title:t.$t("drawer.commodity")},{prepend:m(()=>[l(h,{text:t.$t("dialog.back"),location:"bottom"},{activator:m(({props:o})=>[l(C,{icon:"mdi-close",onClick:s[1]||(s[1]=f=>t.dialog=!1)})]),_:1},8,["text"])]),default:m(()=>[l($),l(C,{loading:t.loading,onClick:s[2]||(s[2]=o=>t.save()),icon:"",color:"green"},{default:m(()=>[l(h,{activator:"parent",text:t.$t("dialog.save"),location:"bottom"},null,8,["text"]),l(k,{icon:"mdi-content-save"})]),_:1},8,["loading"])]),_:1},8,["title"]),u("div",Us,[u("div",Bs,[u("div",Ds,[s[26]||(s[26]=u("div",{class:"modal-header"},[u("h1",{class:"modal-title fs-5 text-primary-dark",id:"pricesModalLabel"}," سایر قیمت‌های فروش "),u("div",{class:"block-options"},[u("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})])],-1)),u("div",Ns,[u("div",Ss,[(d(!0),n(g,null,A(t.data.prices,o=>(d(),n("div",Ts,[u("div",Es,[u("div",Ms,[u("div",Os,[r(u("input",{type:"text",class:"form-control",id:"floatingInput",readonly:"readonly","onUpdate:modelValue":f=>o.list.label=f},null,8,qs),[[b,o.list.label]]),s[23]||(s[23]=u("label",{for:"floatingInput"},"لیست",-1))])]),u("div",Is,[u("div",Ks,[l(y,P({ref_for:!0},t.currencyConfig,{min:"0",class:"form-control",modelValue:o.priceSell,"onUpdate:modelValue":f=>o.priceSell=f}),null,16,["modelValue","onUpdate:modelValue"]),s[24]||(s[24]=u("label",{for:"floatingInput"},"قیمت فروش",-1))])])])]))),256)),t.data.prices.length==0&&this.isLoading==!1?(d(),n("div",Rs,s[25]||(s[25]=[u("h5",{class:"text-danger"},"تاکنون هیچ لیست قیمتی ایجاد نشده است.برای ثبت قیمت‌های فرعی ابتدا یک لیست ایجاد کنید.",-1)]))):p("",!0)])]),s[27]||(s[27]=u("div",{class:"modal-footer"},[u("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal"},[u("i",{class:"fa fa-save me-2"}),e(" ثبت ")])],-1))])])]),u("div",zs,[u("div",js,[u("div",Gs,[u("div",null,[s[30]||(s[30]=u("label",{class:"me-4 text-primary"},"نوع کالا یا خدمات",-1)),u("div",Hs,[r(u("input",{"onUpdate:modelValue":s[3]||(s[3]=o=>this.data.khadamat=o),class:"form-check-input",type:"radio",value:"true"},null,512),[[U,this.data.khadamat]]),s[28]||(s[28]=u("label",{class:"form-check-label",for:"inlineCheckbox1"},"خدمات",-1))]),u("div",Js,[r(u("input",{"onUpdate:modelValue":s[4]||(s[4]=o=>this.data.khadamat=o),class:"form-check-input",type:"radio",value:"false"},null,512),[[U,this.data.khadamat]]),s[29]||(s[29]=u("label",{class:"form-check-label",for:"inlineCheckbox2"},"کالا و اقلام فیزیکی",-1))])])]),u("div",Qs,[u("div",Ws,[u("div",Xs,[r(u("input",{"onUpdate:modelValue":s[5]||(s[5]=o=>this.data.speedAccess=o),class:"form-check-input",type:"checkbox"},null,512),[[L,this.data.speedAccess]]),s[31]||(s[31]=u("label",{class:"form-check-label"},"دسترسی سریع",-1))])])]),u("div",Ys,[u("div",Zs,[u("div",xs,[r(u("input",{"onUpdate:modelValue":s[6]||(s[6]=o=>this.data.withoutTax=o),class:"form-check-input",type:"checkbox"},null,512),[[L,this.data.withoutTax]]),s[32]||(s[32]=u("label",{class:"form-check-label"},"معاف از مالیات",-1))])])])]),u("div",su,[u("div",uu,[u("div",tu,[r(u("input",{"onUpdate:modelValue":s[7]||(s[7]=o=>t.data.name=o),class:"form-control",type:"text"},null,512),[[b,t.data.name]]),s[33]||(s[33]=u("label",{class:"form-label"},[u("span",{class:"text-danger"},"(لازم)"),e(" نام کالا/خدمات")],-1))]),u("div",ou,[r(u("select",{"onUpdate:modelValue":s[8]||(s[8]=o=>t.data.unit=o),class:"form-select"},[(d(!0),n(g,null,A(t.units,o=>(d(),n("option",{key:o.name,value:o.name},a(o.name),9,lu))),128))],512),[[B,t.data.unit]]),s[34]||(s[34]=u("label",{class:"form-label"},"واحد شمارش",-1))])]),u("div",eu,[u("div",au,[l(y,P(t.currencyConfig,{min:"0",class:"form-control",modelValue:t.data.priceBuy,"onUpdate:modelValue":s[9]||(s[9]=o=>t.data.priceBuy=o)}),null,16,["modelValue"]),s[35]||(s[35]=u("label",{class:"form-label"},"قیمت خرید",-1))]),u("div",iu,[t.isPluginActive("accpro")?(d(),n("button",du,s[36]||(s[36]=[u("i",{class:"fa fa-list"},null,-1)]))):p("",!0),u("div",nu,[l(y,P(t.currencyConfig,{min:"0",class:"form-control",modelValue:t.data.priceSell,"onUpdate:modelValue":s[10]||(s[10]=o=>t.data.priceSell=o)}),null,16,["modelValue"]),s[37]||(s[37]=u("label",{class:"form-label"},"قیمت فروش",-1))])])]),u("div",ru,[s[38]||(s[38]=u("small",{class:"mb-2"},"دسته بندی",-1)),r(u("select",{class:"form-select","aria-label":"دسته‌بندی","onUpdate:modelValue":s[11]||(s[11]=o=>this.data.cat=o)},[(d(!0),n(g,null,A(t.listCats,(o,f)=>(d(),n("option",{value:o.id},a(o.name),9,mu))),256))],512),[[B,this.data.cat]])]),u("div",cu,[u("div",pu,[u("div",fu,[r(u("input",{placeholder:"بارکد‌ها را با ; از هم جدا کنید","onUpdate:modelValue":s[12]||(s[12]=o=>t.data.barcodes=o),class:"form-control",type:"text"},null,512),[[b,t.data.barcodes]]),s[39]||(s[39]=u("label",{class:"form-label"},[e(" بارکد‌ها "),u("small",{class:"text-danger"}," (بارکد‌ها را با ; از هم جدا کنید) ")],-1))])])]),u("div",bu,[u("div",Cu,[r(u("input",{"onUpdate:modelValue":s[13]||(s[13]=o=>t.data.des=o),class:"form-control",type:"text"},null,512),[[b,t.data.des]]),s[40]||(s[40]=u("label",{class:"form-label"},"توضیحات",-1))])]),u("div",vu,[s[45]||(s[45]=u("b",{class:"text-primary-dark me-3"},"موجودی کالا",-1)),s[46]||(s[46]=u("label",{class:"text-muted"},"تنظیمات بخش موجودی کالا تنها برای نوع کالا اعمال می‌شود و برای نوع خدمات نادیده گرفته می‌شود.",-1)),u("div",gu,[u("div",yu,[r(u("input",{"onUpdate:modelValue":s[14]||(s[14]=o=>t.data.commodityCountCheck=o),class:"form-check-input",type:"checkbox"},null,512),[[L,t.data.commodityCountCheck]]),s[41]||(s[41]=u("label",{class:"form-check-label"},"کنترل موجودی",-1))])]),u("div",hu,[u("div",Au,[u("div",$u,[r(u("input",{"onUpdate:modelValue":s[15]||(s[15]=o=>t.data.minOrderCount=o),onBlur:s[16]||(s[16]=o=>{(this.data.minOrderCount===""||this.data.minOrderCount===0)&&(this.data.minOrderCount=1)}),onKeypress:s[17]||(s[17]=o=>this.$filters.onlyNumber(o)),class:"form-control",type:"number",min:"1"},null,544),[[b,t.data.minOrderCount]]),s[42]||(s[42]=u("label",{class:"form-label"},"حداقل سفارش",-1))])]),u("div",ku,[u("div",_u,[r(u("input",{"onUpdate:modelValue":s[18]||(s[18]=o=>t.data.orderPoint=o),onKeypress:s[19]||(s[19]=o=>this.$filters.onlyNumber(o)),class:"form-control",type:"number",min:"1"},null,544),[[b,t.data.orderPoint]]),s[43]||(s[43]=u("label",{class:"form-label"},"نقطه سفارش",-1))])]),u("div",Fu,[u("div",wu,[r(u("input",{"onUpdate:modelValue":s[20]||(s[20]=o=>t.data.dayLoading=o),onKeypress:s[21]||(s[21]=o=>this.$filters.onlyNumber(o)),class:"form-control",type:"number"},null,544),[[b,t.data.dayLoading]]),s[44]||(s[44]=u("label",{class:"form-label"},"زمان انتظار(روز)",-1))])])])])])])]),_:1},8,["loading"])]),_:1},8,["modelValue"])],64)}const Nu=N(Ls,[["render",Vu]]);export{Nu as a,Du as q};
