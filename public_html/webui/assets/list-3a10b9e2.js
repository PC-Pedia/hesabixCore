import{_ as u,a as n,S as l}from"./main-9b36f05f.js";import{r as p,a as m,o as f,s as b,e,d as h,u as g,ab as x,b as v,w as k}from"./vendor-adef9cb4.js";const w={name:"list",data:()=>({searchValue:"",loading:p(!0),items:[],headers:[{text:"توکن دسترسی",value:"token",sortable:!0},{text:"مهر زمان انقضا",value:"dateExpire"},{text:"عملیات",value:"operation"}]}),methods:{loadData(){this.loading=!0,n.post("/api/business/api/list").then(s=>{this.items=s.data,this.loading=!1})},submitNew(){this.loading=!0,n.post("/api/business/api/new").then(s=>{this.items.push(s.data),this.loading=!1,l.fire({text:"توکن ایجاد شد. رابط توکن: "+s.data.token,confirmButtonText:"قبول"})})},deleteItem(s){l.fire({text:"آیا برای این مورد مطمئن هستید؟ دسترسی برنامه‌هایی که از این رابط استفاده می‌کنند قطع خواهد شد.",showCancelButton:!0,confirmButtonText:"بله",cancelButtonText:"خیر",icon:"warning"}).then(t=>{t.isConfirmed&&n.post("/api/business/api/remove/"+s).then(r=>{if(r.data.result==1){let i=0;for(let o=0;o<this.items.length;o++)i++,this.items[o].token==s&&this.items.splice(i-1,1);l.fire({text:"توکن با موفقیت حذف شد.",icon:"success",confirmButtonText:"قبول"})}})})}},beforeMount(){this.loadData()}},_={class:"block block-content-full"},y={id:"fixed-header",class:"block-header block-header-default bg-gray-light pt-2 pb-1"},B={class:"block-title text-primary-dark"},C={class:"block-options"},T={class:"block-options-item"},V={class:"block-content pt-1 pb-3"},$={class:"row"},D={class:"col-sm-12 col-md-12 m-0 p-0"},M={class:"mb-1"},N={class:"input-group input-group-sm"},E=["onClick"];function P(s,t,r,i,o,d){const c=m("EasyDataTable");return f(),b("div",_,[e("div",y,[e("h3",B,[e("button",{onClick:t[0]||(t[0]=a=>s.$router.back()),type:"button",class:"float-start d-none d-sm-none d-md-block btn btn-sm btn-link text-warning"},t[3]||(t[3]=[e("i",{class:"fa fw-bold fa-arrow-right"},null,-1)])),t[4]||(t[4]=e("i",{class:"fa fa-plug-circle-plus"},null,-1)),t[5]||(t[5]=h(" دسترسی توسعه دهندگان"))]),e("div",C,[e("div",T,[e("button",{onClick:t[1]||(t[1]=a=>d.submitNew()),class:"btn btn-sm btn-success"},"ایجاد رابط جدید")])])]),e("div",V,[e("div",$,[e("div",D,[e("div",M,[e("div",N,[t[6]||(t[6]=e("span",{class:"input-group-text"},[e("i",{class:"fa fa-search"})],-1)),g(e("input",{"onUpdate:modelValue":t[2]||(t[2]=a=>s.searchValue=a),class:"form-control",type:"text",placeholder:"جست و جو ..."},null,512),[[x,s.searchValue]])])]),v(c,{"table-class-name":"customize-table","show-index":"",alternating:"","search-value":s.searchValue,headers:s.headers,items:s.items,"theme-color":"#1d90ff","header-text-direction":"center","body-text-direction":"center",rowsPerPageMessage:"تعداد سطر",emptyMessage:"اطلاعاتی برای نمایش وجود ندارد",rowsOfPageSeparatorMessage:"از",loading:s.loading},{"item-operation":k(({token:a})=>[e("span",{class:"text-danger px-1",onClick:S=>d.deleteItem(a)},t[7]||(t[7]=[e("i",{class:"fa fa-trash"},null,-1)]),8,E)]),_:1},8,["search-value","headers","items","loading"])])])])])}const O=u(w,[["render",P]]);export{O as default};
