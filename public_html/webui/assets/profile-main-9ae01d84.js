import{d as S,a as l,m as F,b as H,g as K,c as X,e as z,_ as P}from"./main-9b36f05f.js";import{C as j}from"./change_lang-da57543f.js";import{h as q,a as o,o as n,s as m,b as i,w as a,F as d,e as _,t as r,d as g,C as f,u as $,B as k,c as p,A as h,_ as N}from"./vendor-adef9cb4.js";const G=S("application",{state(){return{title:"app.name"}},actions:{setTitle(e,s){e.title=s},getTitle(){return this.$state.title}}}),b=S("user",{state(){return{synced:!1,userData:{login:!1,name:"",mobile:"",email:"",id:""}}},actions:{refresh(){l.post("/api2/user/current/info").then(e=>{e.data.Success==!0&&(this.userData=e.data.data)}).catch(e=>{this.userData.login=!1}),this.synced=!0},isLogin(){return this.userData.login}}}),J=q({name:"profile-main",data:e=>({loading:!1,hesabix:{version:""},siteName:"",siteUrl:"",ROLE_ADMIN:!1,user:{mobile:"1"},business_count:0,drawer:!0,items:[{text:"داشبورد",url:"/profile/dashboard",icon:"mdi-view-dashboard",visible:!0},{text:"کسب‌و‌کار جدید",url:"/profile/new-business",icon:"mdi-store-plus",visible:!0},{text:"کسب‌و‌کارها",url:"/profile/business",icon:"mdi-format-list-text",visible:!0},{text:"پشتیبانی",url:"/profile/support-list",icon:"mdi-forum",visible:!0},{text:"تغییر کلمه عبور",url:"/profile/change-password",icon:"mdi-lock-reset",visible:!0}],adminItems:[{text:"تیکت‌ها",url:"/profile/manager/support-list",icon:"mdi-forum",visible:!0},{text:"کسب‌و‌کارها",url:"/profile/manager/business/list",icon:"mdi-home-city",visible:!0},{text:"کاربران",url:"/profile/manager/users/list",icon:"mdi-account-multiple",visible:!0},{text:"کاربران آنلاین",url:"/profile/manager/users/onlinelist",icon:"mdi-account-badge",visible:!0},{text:"افزونه‌ها",url:"/profile/manager/plugins/list",icon:"mdi-toy-brick",visible:!0},{text:"به روز رسانی هسته",url:"/profile/manager/update-core",icon:"mdi-undo",visible:!0},{text:"تغییرات",url:"/profile/manager/changes/list",icon:"mdi-cellphone-arrow-down",visible:!0},{text:"تاریخچه سیستم",url:"/profile/manager/logs/list",icon:"mdi-history",visible:!0}],adminSettings:[{text:"پیامک",url:"/profile/manager/system/sms/settings",icon:"mdi-message-alert",visible:!0},{text:"سیستم",url:"/profile/manager/system/mod",icon:"mdi-desktop-classic",visible:!0},{text:"رجیستری",url:"/profile/manager/registry/mod",icon:"mdi-table-cog",visible:!0},{text:"بانک اطلاعاتی",url:"/profile/manager/database/info",icon:"mdi-database-cog",visible:!0}]}),computed:{applicationStore(){return G},...F(b),...H(b,["userData","synced"])},components:{Change_lang:j},created(){this.siteName=K(),this.siteUrl=X()},methods:{...z(b,["refresh"]),logout(){l.post("/api/user/logout").then(e=>{localStorage.removeItem("X-AUTH-TOKEN"),delete l.defaults.headers.common["X-AUTH-TOKEN"],this.$router.push("/user/login")})}},mounted(){this.drawer=!this.$vuetify.display.mobile,this.loading=!0,l.post("/api/user/has/role/ROLE_ADMIN").then(e=>{this.ROLE_ADMIN=e.data.Success,this.loading=!1}),l.post("/api/general/stat").then(e=>{this.hesabix=e.data})},async beforeMount(){await l.post("/api/user/check/login").then(e=>{e.data.Success==!1?this.$router.push("/user/login"):(l.post("/api/user/current/info").then(s=>{this.user=s.data}),l.post("/api/business/list/count").then(s=>{this.business_count=s.data.count}))}).catch(()=>{this.$router.push("/user/login")})}}),Q={class:"text-primary"},W={class:"position-relative py-1 px-1"};function Y(e,s,Z,ee,te,ie){const y=o("v-avatar"),x=o("v-spacer"),C=o("v-system-bar"),D=o("v-card"),w=o("v-icon"),v=o("v-list-item-title"),u=o("v-list-item"),A=o("v-list-subheader"),E=o("v-list-group"),I=o("v-list"),L=o("v-navigation-drawer"),V=o("v-app-bar-nav-icon"),M=o("v-app-bar-title"),O=o("v-btn"),R=o("v-tooltip"),T=o("v-app-bar"),U=o("RouterView"),B=o("v-main");return n(),m(d,null,[i(C,{color:"primaryLight2"},{default:a(()=>[i(y,{image:"/img/logo-blue.png",size:"20",class:"me-2"}),_("span",null,r(e.$t("hesabix.banner")),1),i(x)]),_:1}),i(L,{modelValue:e.drawer,"onUpdate:modelValue":s[0]||(s[0]=t=>e.drawer=t)},{default:a(()=>[i(D,{height:"64",rounded:"0","prepend-icon":"mdi-account"},{title:a(()=>[g(r(e.$t("app.name")),1)]),prepend:a(()=>[i(y,{image:"./img/favw.png"})]),_:1}),i(I,{class:"px-0 pt-0"},{default:a(()=>[(n(!0),m(d,null,f(e.items,(t,c)=>$((n(),p(u,{to:t.url,key:c,value:t},{prepend:a(()=>[i(w,{icon:t.icon},null,8,["icon"])]),default:a(()=>[i(v,{textContent:r(t.text)},null,8,["textContent"])]),_:2},1032,["to","value"])),[[k,t.visible]])),128)),e.ROLE_ADMIN==!0?(n(),p(A,{key:0},{default:a(()=>[g(r(e.$t("pages.dashboard.admin_area")),1)]),_:1})):h("",!0),e.ROLE_ADMIN?(n(!0),m(d,{key:1},f(e.adminItems,(t,c)=>$((n(),p(u,{to:t.url,key:c,value:t,color:"primary"},{prepend:a(()=>[i(w,{icon:t.icon},null,8,["icon"])]),default:a(()=>[i(v,{textContent:r(t.text)},null,8,["textContent"])]),_:2},1032,["to","value"])),[[k,t.visible]])),128)):h("",!0),e.ROLE_ADMIN==!0?(n(),p(E,{key:2},{activator:a(({props:t})=>[i(u,N(t,{"prepend-icon":"mdi-cog",title:e.$t("dialog.settings")}),null,16,["title"])]),default:a(()=>[(n(!0),m(d,null,f(e.adminSettings,(t,c)=>(n(),p(u,{"prepend-icon":t.icon,to:t.url,title:t.text},null,8,["prepend-icon","to","title"]))),256))]),_:1})):h("",!0),i(u,{color:"primary"},{default:a(()=>[i(v,null,{default:a(()=>[_("small",Q,r(e.$t("app.name"))+" : "+r(e.hesabix.version),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),i(T,{"scroll-behavior":"inverted elevate","scroll-threshold":"0"},{default:a(()=>[i(V,{onClick:s[1]||(s[1]=t=>e.drawer=!e.drawer)}),i(M,null,{default:a(()=>[g(r(e.$t("app.name")),1)]),_:1}),i(x),i(R,{text:e.$t("dialog.exit"),location:"bottom"},{activator:a(({props:t})=>[i(O,N(t,{color:"primary",icon:"mdi-logout-variant",variant:"flat",onClick:e.logout,class:"me-2"}),null,16,["onClick"])]),_:1},8,["text"])]),_:1}),i(B,{class:"bg-surface-light"},{default:a(()=>[_("div",W,[i(U)])]),_:1})],64)}const ne=P(J,[["render",Y]]);export{ne as default};
