import{_ as h,S as l,a as u}from"./main-9b36f05f.js";import{a as _,o,s as i,e as t,d as x,u as g,ab as w,F as k,C as v,t as c,b as y,w as B,A as b}from"./vendor-adef9cb4.js";const C={name:"user_rolls",data:()=>({users:{},newEmail:""}),methods:{deleteUser(s){l.fire({title:"آیا برای حذف کاربر مطمئن هستید؟",showCancelButton:!0,confirmButtonText:"بله",cancelButtonText:"خیر"}).then(e=>{e.isConfirmed&&u.post("/api/business/delete/user",{bid:localStorage.getItem("activeBid"),email:s}).then(m=>{if(m.data.result==1){let r=0;for(let n=0;n<this.users.length;n++)r++,this.users[n].email==s&&this.users.splice(r-1,1);l.fire({text:"کاربر با موفقیت حذف شد.",icon:"success",confirmButtonText:"قبول"})}})})},submitData(){this.newEmail==""?l.fire({text:"پست الکترونیکی را وارد کنید.",icon:"error",confirmButtonText:"قبول"}):u.post("/api/business/add/user",{bid:localStorage.getItem("activeBid"),email:this.newEmail}).then(s=>{if(s.data.result==0)l.fire({text:"کاربری با این پست الکترونیکی یافت نشد.",icon:"error",confirmButtonText:"قبول"});else if(s.data.result==1)l.fire({text:"قبلا این کاربر به کسب و کار افزوده شده است.",icon:"error",confirmButtonText:"قبول"});else{let e={name:s.data.data.name,email:s.data.data.email,owner:s.data.data.owner};this.users.push(e),l.fire({text:"کاربر با موفقیت عضو کسب و کار شد.",icon:"success",confirmButtonText:"قبول"})}this.newEmail=""})}},mounted(){u.post("/api/user/get/users/of/business/"+localStorage.getItem("activeBid")).then(s=>{this.users=s.data})}},T={class:"block block-content-full"},E={class:"block-content p-0"},S={class:"mb-4"},D={class:"input-group p-3"},V={class:"form-floating"},N={class:"table table-hover table-vcenter table-sm"},I={class:"text-center",scope:"row"},U={class:"fw-semibold text-primary-dark"},F={class:"d-none d-sm-table-cell"},$={class:"badge bg-primary"},z={class:"text-center"},A={key:0,class:"btn-group btn-group-sm"},L=["onClick"],M={key:1,class:"badge bg-success"};function j(s,e,m,r,n,d){const f=_("router-link");return o(),i("div",T,[e[6]||(e[6]=t("div",{id:"fixed-header",class:"block-header block-header-default bg-gray-light"},[t("h3",{class:"block-title text-primary-dark"},[t("i",{class:"fa fa-users-gear"}),x(" کاربران و دسترسی‌ها ")]),t("div",{class:"block-options"})],-1)),t("div",E,[t("div",S,[t("div",D,[t("div",V,[g(t("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>s.newEmail=a),class:"form-control",type:"email"},null,512),[[w,s.newEmail]]),e[2]||(e[2]=t("label",{for:"example-group3-floating2"},"برای افزودن کاربر جدید پست الکترونیکی را وارد کنید.",-1))]),t("button",{onClick:e[1]||(e[1]=(...a)=>d.submitData&&d.submitData(...a)),class:"btn btn-primary",type:"button"}," افزودن ")])]),t("table",N,[e[5]||(e[5]=t("thead",null,[t("tr",null,[t("th",{class:"text-center",style:{width:"50px"}},"#"),t("th",null,"نام / نام خانوادگی"),t("th",null,"پست الکترونیکی"),t("th",{class:"text-center",style:{width:"100px"}},"عملیات")])],-1)),t("tbody",null,[(o(!0),i(k,null,v(s.users,(a,p)=>(o(),i("tr",null,[t("th",I,c(p+1),1),t("td",U,c(a.name),1),t("td",F,[t("span",$,c(a.email),1)]),t("td",z,[a.owner!=1?(o(),i("div",A,[y(f,{to:{name:"business_user_roll_edit",params:{email:a.email}},class:"btn btn-alt-primary",type:"button","aria-label":" ویرایش "},{default:B(()=>e[3]||(e[3]=[t("i",{class:"fa fa-pencil-alt"},null,-1)])),_:2},1032,["to"]),t("button",{onClick:q=>d.deleteUser(a.email),class:"btn btn-alt-primary",type:"button","aria-label":" حذف "},e[4]||(e[4]=[t("i",{class:"fa fa-times"},null,-1)]),8,L)])):b("",!0),a.owner==1?(o(),i("span",M,"مدیر کل")):b("",!0)])]))),256))])])])])}const J=h(C,[["render",j]]);export{J as default};
