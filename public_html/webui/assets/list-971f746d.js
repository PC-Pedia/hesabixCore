import{_ as x,a as i,S as u}from"./main-9b36f05f.js";import{r as y,a as v,o as w,s as g,e as t,d as l,b as f,w as r,aa as b,u as _,ab as S,t as c,F as B,C as L,c as C}from"./vendor-adef9cb4.js";import{H as T}from"./helpBtn-57b83c77.js";const U={name:"list",components:{HelpBtn:T},data:()=>({sumSelected:0,sumTotal:0,itemsSelected:[],searchValue:"",loading:y(!0),items:[],headers:[{text:"عملیات",value:"operation"},{text:"کد",value:"code",sortable:!0},{text:"اشخاص",value:"persons",sortable:!0},{text:"تاریخ",value:"date",sortable:!0},{text:"شرح",value:"des"},{text:"مبلغ",value:"amount",sortable:!0}]}),methods:{loadData(){i.post("/api/person/send/list/search").then(s=>{this.items=s.data,this.items.forEach(e=>{e.amount=this.$filters.formatNumber(e.amount),this.sumTotal+=parseInt(e.amount.replaceAll(",",""))}),this.loading=!1})},deleteItem(s){u.fire({text:"آیا برای این سند مطمئن هستید؟",showCancelButton:!0,confirmButtonText:"بله",cancelButtonText:"خیر"}).then(e=>{e.isConfirmed&&i.post("/api/accounting/remove",{code:s}).then(n=>{if(n.data.result==1){let a=0;for(let p=0;p<this.items.length;p++)a++,this.items[p].code==s&&this.items.splice(a-1,1);u.fire({text:"سند با موفقیت حذف شد.",icon:"success",confirmButtonText:"قبول"})}})})},excellOutput(s=!0){s?i({method:"get",url:"/api/person/send/list/excel",responseType:"arraybuffer"}).then(e=>{window.URL.createObjectURL(new Blob([e.data]));var n=window.URL.createObjectURL(new Blob([e.data])),a=document.createElement("a");a.href=n,a.setAttribute("download","persons-send-list.xlsx"),document.body.appendChild(a),a.click()}):this.itemsSelected.length===0?u.fire({text:"هیچ آیتمی انتخاب نشده است.",icon:"info",confirmButtonText:"قبول"}):i({method:"post",url:"/api/person/send/list/excel",responseType:"arraybuffer",data:{items:this.itemsSelected}}).then(e=>{window.URL.createObjectURL(new Blob([e.data]));var n=window.URL.createObjectURL(new Blob([e.data])),a=document.createElement("a");a.href=n,a.setAttribute("download","persons-send-list.xlsx"),document.body.appendChild(a),a.click()})},print(s=!0){s?i.post("/api/person/send/list/print").then(e=>{this.printID=e.data.id,window.open(this.$API_URL+"/front/print/"+this.printID,"_blank","noreferrer")}):this.itemsSelected.length===0?u.fire({text:"هیچ آیتمی انتخاب نشده است.",icon:"info",confirmButtonText:"قبول"}):i.post("/api/person/send/list/print",{items:this.itemsSelected}).then(e=>{this.printID=e.data.id,window.open(this.$API_URL+"/front/print/"+this.printID,"_blank","noreferrer")})}},beforeMount(){this.loadData()},watch:{itemsSelected:{handler:function(s,e){this.sumSelected=0,this.itemsSelected.forEach(n=>{this.sumSelected+=parseInt(n.amount.replaceAll(",",""))})},deep:!0}}},$={class:"block block-content-full"},R={id:"fixed-header",class:"block-header block-header-default bg-gray-light pt-2 pb-1"},D={class:"block-title text-primary-dark"},I={class:"block-options"},V={class:"dropdown"},A={class:"dropdown-menu"},M={class:"dropdown"},N={class:"dropdown-menu"},O={class:"block-content pt-1 pb-3"},E={class:"row"},j={class:"col-sm-12 col-md-12 m-0 p-0"},P={class:"mb-1"},z={class:"input-group input-group-sm"},F={class:"dropdown-center"},H={"aria-labelledby":"dropdown-align-center-outline-primary",class:"dropdown-menu dropdown-menu-end",style:{}},q=["onClick"],G={class:"container-fluid p-0 mx-0 my-3"},J={class:"block block-rounded block-link-shadow border-start border-success border-3",href:"javascript:void(0)"},K={class:"block-content block-content-full block-content-sm bg-body-light"},Q={class:"row"},W={class:"col-sm-6 com-md-6"},X={class:"text-primary"},Y={class:"col-sm-6 com-md-6"},Z={class:"text-primary"};function ee(s,e,n,a,p,d){const m=v("router-link"),k=v("EasyDataTable");return w(),g("div",$,[t("div",R,[t("h3",D,[t("button",{onClick:e[0]||(e[0]=o=>s.$router.back()),type:"button",class:"float-start d-none d-sm-none d-md-block btn btn-sm btn-link text-warning"},e[7]||(e[7]=[t("i",{class:"fa fw-bold fa-arrow-right"},null,-1)])),e[8]||(e[8]=l(" پرداخت‌ها "))]),t("div",I,[f(m,{to:"/acc/persons/send/mod/",class:"btn btn-sm btn-primary ms-2"},{default:r(()=>e[9]||(e[9]=[t("span",{class:"fa fa-plus fw-bolder"},null,-1)])),_:1}),t("div",V,[e[10]||(e[10]=t("a",{class:"btn btn-sm btn-danger ms-2 dropdown-toggle text-end",href:"#",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[t("i",{class:"fa fa-file-pdf"})],-1)),t("ul",A,[t("li",null,[t("a",{onClick:e[1]||(e[1]=b(o=>d.print(!1),["prevent"])),class:"dropdown-item",href:"#"},"انتخاب شده‌ها")]),t("li",null,[t("a",{onClick:e[2]||(e[2]=b(o=>d.print(!0),["prevent"])),class:"dropdown-item",href:"#"},"همه موارد")])])]),t("div",M,[e[11]||(e[11]=t("a",{class:"btn btn-sm btn-success ms-2 dropdown-toggle text-end",href:"#",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[t("i",{class:"fa fa-file-excel"})],-1)),t("ul",N,[t("li",null,[t("a",{onClick:e[3]||(e[3]=b(o=>d.excellOutput(!1),["prevent"])),class:"dropdown-item",href:"#"},"انتخاب شده‌ها")]),t("li",null,[t("a",{onClick:e[4]||(e[4]=b(o=>d.excellOutput(!0),["prevent"])),class:"dropdown-item",href:"#"},"همه موارد")])])])])]),t("div",O,[t("div",E,[t("div",j,[t("div",P,[t("div",z,[e[12]||(e[12]=t("span",{class:"input-group-text"},[t("i",{class:"fa fa-search"})],-1)),_(t("input",{"onUpdate:modelValue":e[5]||(e[5]=o=>s.searchValue=o),class:"form-control",type:"text",placeholder:"جست و جو ..."},null,512),[[S,s.searchValue]])])]),f(k,{"table-class-name":"customize-table","items-selected":s.itemsSelected,"onUpdate:itemsSelected":e[6]||(e[6]=o=>s.itemsSelected=o),"show-index":"",alternating:"","search-value":s.searchValue,headers:s.headers,items:s.items,"theme-color":"#1d90ff","header-text-direction":"center","body-text-direction":"center",rowsPerPageMessage:"تعداد سطر",emptyMessage:"اطلاعاتی برای نمایش وجود ندارد",rowsOfPageSeparatorMessage:"از",loading:s.loading},{"item-operation":r(({code:o})=>[t("div",F,[e[16]||(e[16]=t("button",{"aria-expanded":"false","aria-haspopup":"true",class:"btn btn-sm btn-link","data-bs-toggle":"dropdown",id:"dropdown-align-center-alt-primary",type:"button"},[t("i",{class:"fa-solid fa-ellipsis"})],-1)),t("div",H,[f(m,{class:"dropdown-item",to:"/acc/accounting/view/"+o},{default:r(()=>e[13]||(e[13]=[t("i",{class:"fa fa-file text-success pe-2"},null,-1),l(" سند حسابداری ")])),_:2},1032,["to"]),f(m,{to:{name:"person_send_mod",params:{id:o}},class:"dropdown-item"},{default:r(()=>e[14]||(e[14]=[t("i",{class:"fa fa-edit pe-2"},null,-1),l(" ویرایش ")])),_:2},1032,["to"]),t("button",{type:"button",onClick:h=>d.deleteItem(o),class:"dropdown-item text-danger"},e[15]||(e[15]=[t("i",{class:"fa fa-trash pe-2"},null,-1),l(" حذف ")]),8,q)])])]),"item-persons":r(({persons:o})=>[(w(!0),g(B,null,L(o,h=>(w(),C(m,{class:"me-2",to:"/acc/persons/card/view/"+h.code},{default:r(()=>[l(c(h.nikename),1)]),_:2},1032,["to"]))),256))]),_:1},8,["items-selected","search-value","headers","items","loading"]),t("div",G,[t("a",J,[t("div",K,[t("div",Q,[t("div",W,[e[17]||(e[17]=t("span",{class:"text-dark"},[t("i",{class:"fa fa-list-dots"}),l(" مبلغ کل: ")],-1)),t("span",X,c(s.$filters.formatNumber(this.sumTotal))+" "+c(s.$filters.getActiveMoney().shortName),1)]),t("div",Y,[e[18]||(e[18]=t("span",{class:"text-dark"},[t("i",{class:"fa fa-list-check"}),l(" جمع مبلغ موارد انتخابی: ")],-1)),t("span",Z,c(s.$filters.formatNumber(this.sumSelected))+" "+c(s.$filters.getActiveMoney().shortName),1)])])])])])])])])])}const ae=x(U,[["render",ee]]);export{ae as default};
