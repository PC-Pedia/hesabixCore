import{_ as k,a as r,S as d}from"./main-9b36f05f.js";import{H as C}from"./helpBtn-57b83c77.js";import{I as B}from"./person-import-excel-aa69847d.js";import{a as i,o as y,s as V,b as t,w as n,F as T,_ as c}from"./vendor-adef9cb4.js";const q={name:"list",components:{HelpBtn:C,importExcel:B},watch:{"importWindowsState.submited"(e,o){this.importWindowsState.submited=!1,e&&this.loadData()}},data:()=>({importWindowsState:{submited:!1},tableClassName:"extable",searchValue:"",loading:!0,orgItems:[],types:[],typesSelected:[],items:[],itemsSelected:[],headers:[{text:"عملیات",value:"operation"},{text:"کاربر",value:"submitter"},{text:"تاریخ ایجاد",value:"dateSubmit"},{text:"کد",value:"code"}]}),methods:{loadData(){this.loading=!0,r.post("/api/printers/exist/"+this.$route.params.id).then(e=>{e.data.Success!=!0&&this.$router.push({name:"acc_home"})}),r.post("/api/printers/queue/"+this.$route.params.id).then(e=>{e.data.Success==!0&&(this.items=e.data.data,this.loading=!1)})},deleteItem(e){d.fire({text:"آیا برای حذف این برگه مطمئن هستید؟",showCancelButton:!0,confirmButtonText:"بله",cancelButtonText:"خیر"}).then(o=>{o.isConfirmed&&r.post("/api/printers/queue_doc_delete/"+e).then(_=>{if(_.data.Success==!0){let m=0;for(let l=0;l<this.items.length;l++)m++,this.items[l].code==e&&this.items.splice(m-1,1);d.fire({text:"برگه با موفقیت حذف شد.",icon:"success",confirmButtonText:"قبول"})}})})},print(e){window.open(this.$API_URL+"/front/print/"+e,"_blank","noreferrer")},cleanQueue(){d.fire({text:"آیا برای حذف کل برگه‌ها مطمئن هستید؟",showCancelButton:!0,confirmButtonText:"بله",cancelButtonText:"خیر"}).then(e=>{e.isConfirmed&&r.post("/api/printers/queue_doc_delete_all").then(o=>{o.data.Success==!0&&(this.items=[],d.fire({text:"صف چاپ پاکسازی شد.",icon:"success",confirmButtonText:"قبول"}))})})}},beforeMount(){this.loadData()}};function I(e,o,_,m,l,u){const p=i("v-btn"),f=i("v-tooltip"),g=i("v-spacer"),b=i("v-toolbar"),h=i("v-icon"),x=i("v-text-field"),v=i("v-list-item"),w=i("v-list"),$=i("v-menu"),S=i("EasyDataTable");return y(),V(T,null,[t(b,{color:"toolbar",title:e.$t("drawer.print_queue")},{prepend:n(()=>[t(f,{text:e.$t("dialog.back"),location:"bottom"},{activator:n(({props:a})=>[t(p,c(a,{onClick:o[0]||(o[0]=s=>e.$router.back()),class:"d-none d-sm-flex",variant:"text",icon:"mdi-arrow-right"}),null,16)]),_:1},8,["text"])]),default:n(()=>[t(g),t(f,{text:e.$t("dialog.clean_queue"),location:"bottom"},{activator:n(({props:a})=>[t(p,c(a,{icon:"mdi-trash-can",color:"danger",onClick:o[1]||(o[1]=s=>u.cleanQueue())}),null,16)]),_:1},8,["text"])]),_:1},8,["title"]),t(x,{loading:e.loading,color:"green",class:"mb-0 pt-0 rounded-0","hide-details":"auto",density:"compact",placeholder:e.$t("dialog.search_txt"),modelValue:e.searchValue,"onUpdate:modelValue":o[2]||(o[2]=a=>e.searchValue=a),type:"text",clearable:""},{"prepend-inner":n(()=>[t(f,{location:"bottom",text:e.$t("dialog.search")},{activator:n(({props:a})=>[t(h,c(a,{color:"danger",icon:"mdi-magnify"}),null,16)]),_:1},8,["text"])]),_:1},8,["loading","placeholder","modelValue"]),t(S,{"table-class-name":"customize-table","items-selected":e.itemsSelected,"onUpdate:itemsSelected":o[3]||(o[3]=a=>e.itemsSelected=a),"multi-sort":"","show-index":"",alternating:"","search-value":e.searchValue,headers:e.headers,items:e.items,"theme-color":"#1d90ff","header-text-direction":"center","body-text-direction":"center",rowsPerPageMessage:"تعداد سطر",emptyMessage:"اطلاعاتی برای نمایش وجود ندارد",rowsOfPageSeparatorMessage:"از",loading:e.loading},{"item-operation":n(({code:a})=>[t($,null,{activator:n(({props:s})=>[t(p,c({variant:"text",size:"small",color:"error",icon:"mdi-menu"},s),null,16)]),default:n(()=>[t(w,null,{default:n(()=>[t(v,{class:"text-dark",title:e.$t("dialog.view"),onClick:s=>u.print(a)},{prepend:n(()=>[t(h,{color:"green-darken-4",icon:"mdi-eye"})]),_:2},1032,["title","onClick"]),t(v,{class:"text-dark",title:e.$t("dialog.delete"),onClick:s=>u.deleteItem(a)},{prepend:n(()=>[t(h,{color:"deep-orange-accent-4",icon:"mdi-trash-can"})]),_:2},1032,["title","onClick"])]),_:2},1024)]),_:2},1024)]),_:1},8,["table-class-name","items-selected","search-value","headers","items","loading"])],64)}const z=k(q,[["render",I]]);export{z as default};
