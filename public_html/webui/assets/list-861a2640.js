import{_ as v,a as r,S as l}from"./main-9b36f05f.js";import{r as x,a as d,o as k,s as w,e as s,d as i,b as p,w as a,u as m,ab as y,B,t as T}from"./vendor-adef9cb4.js";const V={name:"list",data:()=>({searchValue:"",loading:x(!0),items:[],headers:[{text:"شخص",value:"person.nikename",width:"120px"},{text:"تعداد سهام",value:"percent",width:"140px"},{text:"عملیات",value:"operation",width:"130"}],persons:[],shareholder:{percent:1,person:null}}),methods:{loadData(){this.loading=!0,r.post("/api/shareholders/list").then(t=>{this.items=t.data,this.loading=!1}),r.post("/api/person/list/limit").then(t=>{this.persons=t.data})},submit(){this.shareholder.person==null?l.fire({text:"سهامدار انتخاب نشده است.",icon:"error",confirmButtonText:"قبول"}):this.shareholder.percent==""?l.fire({text:"تعداد سهام وارد نشده است .",icon:"error",confirmButtonText:"قبول"}):r.post("/api/shareholders/insert",{person:this.shareholder.person.id,count:this.shareholder.percent}).then(t=>{l.fire({text:"سهامدار با موفقیت افزوده شد .",icon:"success",confirmButtonText:"قبول"}),this.shareholder.percent=1,this.shareholder.person=null,this.loadData()})},deleteItem(t){l.fire({text:"آیا برای حذف این سهامدار مطمئن هستید؟",icon:"warning",confirmButtonText:"قبول",showCancelButton:!0,cancelButtonText:"انصراف"}).then(e=>{e.isConfirmed&&(this.loading=!0,r.post("/api/shareholders/remove/"+t).then(h=>{this.loading=!1,l.fire({text:"سهامدار حذف شد.",icon:"success",confirmButtonText:"قبول"}).then(u=>{for(let n=0;n<this.items.length;n++)this.items[n].id==t&&this.items.splice(n,1)})}))})}},beforeMount(){this.loadData()}},$={class:"block block-content-full"},C={id:"fixed-header",class:"block-header block-header-default bg-gray-light pt-2 pb-1"},D={class:"block-title text-primary-dark"},M={class:"block-content pt-1 pb-3"},N={class:"row mb-3 align-items-end border border-secondary rounded-2 p-2"},S={class:"col-sm-12 col-md-4 my-2"},E={class:"col-sm-12 col-md-4 my-2"},P={class:"col-sm-12 col-md-4 my-2"},z=["disabled"],I={class:"spinner-grow spinner-grow-sm me-2",role:"status"},U={class:"row"},K={class:"col-sm-12 col-md-12 m-0 p-0"},L=["onClick"];function O(t,e,h,u,n,c){const f=d("v-cob"),b=d("EasyDataTable");return k(),w("div",$,[s("div",C,[s("h3",D,[s("button",{onClick:e[0]||(e[0]=o=>t.$router.back()),type:"button",class:"float-start d-none d-sm-none d-md-block btn btn-sm btn-link text-warning"},e[5]||(e[5]=[s("i",{class:"fa fw-bold fa-arrow-right"},null,-1)])),e[6]||(e[6]=s("i",{class:"fa fa-circle-dot px-2"},null,-1)),e[7]||(e[7]=i(" سهامداران "))]),e[8]||(e[8]=s("div",{class:"block-options"},null,-1))]),s("div",M,[s("div",N,[s("div",S,[e[10]||(e[10]=s("label",{class:"form-label"},[s("i",{class:"fa fa-person me-2"}),i(" سهامدار ")],-1)),p(f,{dir:"rtl",class:"",options:t.persons,label:"nikename",modelValue:t.shareholder.person,"onUpdate:modelValue":e[1]||(e[1]=o=>t.shareholder.person=o)},{"no-options":a(({search:o,searching:g,loading:_})=>e[9]||(e[9]=[i(" نتیجه‌ای یافت نشد! ")])),_:1},8,["options","modelValue"])]),s("div",E,[e[11]||(e[11]=s("label",{class:"form-label"},[s("i",{class:"fa fa-file me-2"}),i(" تعداد سهام ")],-1)),m(s("input",{type:"number",onKeypress:e[2]||(e[2]=o=>this.$filters.onlyNumber(o)),class:"form-control",min:"1","onUpdate:modelValue":e[3]||(e[3]=o=>this.shareholder.percent=o)},null,544),[[y,this.shareholder.percent]])]),s("div",P,[s("button",{disabled:this.loading,onClick:e[4]||(e[4]=o=>c.submit()),type:"button",class:"btn btn-primary"},[m(s("div",I,e[12]||(e[12]=[s("span",{class:"visually-hidden"},"Loading...",-1)]),512),[[B,this.loading]]),e[13]||(e[13]=s("i",{class:"fa fa-save me-2"},null,-1)),e[14]||(e[14]=i(" افزودن سهامدار "))],8,z)])]),s("div",U,[s("div",K,[p(b,{"table-class-name":"customize-table","show-index":"",alternating:"","search-value":t.searchValue,headers:t.headers,items:t.items,"theme-color":"#1d90ff","header-text-direction":"center","body-text-direction":"center",rowsPerPageMessage:"تعداد سطر",emptyMessage:"اطلاعاتی برای نمایش وجود ندارد",rowsOfPageSeparatorMessage:"از",loading:t.loading},{"item-percent":a(({percent:o})=>[s("span",null,T(t.$filters.formatNumber(o)),1)]),"item-operation":a(({id:o})=>[s("button",{onClick:g=>this.deleteItem(o),type:"button",class:"btn btn-link"},e[15]||(e[15]=[s("i",{class:"fa fa-trash px-2 text-danger"},null,-1)]),8,L)]),_:1},8,["search-value","headers","items","loading"])])])])])}const A=v(V,[["render",O]]);export{A as default};
