import{_ as z,L as j,l as q,a as c,S as w}from"./main-9b36f05f.js";import{T as G}from"./vue3-treeselect.common-f8cf97d9.js";/* empty css                        */import{a as n,o as r,s as m,b as a,w as s,F as k,_ as b,d as g,t as u,e as o,u as i,as as S,ao as $,ab as h,au as x,C as U,A as H}from"./vendor-adef9cb4.js";const I={name:"mod",components:{Treeselect:G,Loading:j,Money3:q},data:()=>({tabs:0,loading:!1,plugins:[],units:"",barcode:{count:1},priceList:[],data:{name:"",priceSell:0,priceBuy:0,des:"",unit:"عدد",code:0,khadamat:!1,cat:null,orderPoint:0,commodityCountCheck:!1,minOrderCount:1,dayLoading:0,speedAccess:!1,withoutTax:!1,barcodes:"",prices:[]},listCats:[],currencyConfig:{masked:!1,prefix:"",suffix:"ریال",thousands:",",decimal:".",precision:0,disableNegative:!1,disabled:!1,min:0,max:null,allowBlank:!1,minimumNumberOfCharacters:0,shouldRound:!0,focusOnRight:!1}}),mounted(){this.loadData(this.$route.params.id)},beforeRouteUpdate(l,t){this.loadData(l.params.id)},methods:{generateBarcode(){for(let l=0;l<this.barcode.count;l++){let t=Math.random()*1e18;this.data.barcodes=this.data.barcodes+";"+t}},isPluginActive(l){return this.plugins[l]!==void 0},loadData(l=""){this.loading=!0,c.post("/api/plugin/get/actives").then(t=>{this.plugins=t.data}),c.post("/api/commodity/units").then(t=>{this.units=t.data}),l==""&&c.post("/api/commodity/pricelist/list").then(t=>{t.data.length==0?this.data.prices=[]:(this.priceList=t.data,this.priceList.forEach(B=>{this.data.prices.push({id:0,priceBuy:0,priceSell:0,list:B})}))}),c.post("/api/commodity/cat/get/line").then(t=>{this.listCats=t.data,this.$route.params.id||(this.data.cat=t.data[1])}),l!=""&&(this.loading=!0,c.post("/api/commodity/info/"+l).then(t=>{this.data=t.data,this.data.prices.length==0&&(this.data.prices=this.priceList)})),this.loading=!1},save(){this.data.name.length===0?w.fire({text:"نام کالا یا خدمات الزامی است.",icon:"error",confirmButtonText:"قبول"}):(this.loading=!0,c.post("/api/commodity/mod/"+this.data.code,this.data).then(l=>{this.loading=!1,l.data.result==2?w.fire({text:"قبلا ثبت شده است.",icon:"error",confirmButtonText:"قبول"}):w.fire({text:"مشخصات کالا و خدمات ثبت شد.",icon:"success",confirmButtonText:"قبول"}).then(()=>{this.$router.push("/acc/commodity/list")})}))}}},J={class:"row py-3"},Q={class:"col-sm-6 col-md-6 mb-1"},W={class:"form-check form-check-inline"},X={class:"form-check form-check-inline"},Y={class:"col-sm-6 col-md-6 mb-1"},Z={class:"space-y-2"},tt={class:"form-check form-switch"},ot={class:"row"},lt={class:"col-sm-12 col-md-6"},et={class:"form-floating mb-4"},at={class:"col-sm-12 col-md-6"},st={class:"form-floating mb-4"},nt=["value"],it={class:"col-sm-12 col-md-12 mb-4"},dt=["value"],rt={class:"col-sm-12 col-md-12 mb-4"},mt={class:"col-sm-12 col-md-12"},ut={class:"form-floating mb-4"},ct={class:"row"},pt={class:"col-sm-12 col-md-6"},ft={class:"form-floating mb-4"},vt={class:"col-sm-12 col-md-6"},bt={class:"form-floating mb-4"},gt={class:"col-sm-12 col-md-6"},ht={class:"form-floating mb-4"},yt={class:"form-label"},_t={class:"col-sm-12 col-md-12"},kt={class:"space-y-2"},Vt={class:"form-check form-switch"},Ct={class:"row"},wt={class:"col-sm-12 col-md-4 mt-2"},$t={class:"form-floating mb-4"},Ut={class:"col-sm-12 col-md-4 mt-2"},Bt={class:"form-floating mb-4"},Tt={class:"col-sm-12 col-md-4 mt-2"},Lt={class:"form-floating mb-4"},St={class:"col-sm-6 col-md-6 mb-1"},xt={class:"space-y-2"},Nt={class:"form-check form-switch"};function Ot(l,t,B,Mt,Pt,V){const p=n("v-btn"),T=n("v-tooltip"),L=n("v-spacer"),N=n("v-icon"),y=n("v-tab"),O=n("v-tabs"),M=n("v-toolbar"),P=n("v-number-input"),f=n("v-card-text"),A=n("v-card-actions"),v=n("v-card"),D=n("v-dialog"),R=n("v-textarea"),_=n("v-tabs-window-item"),C=n("money3"),K=n("v-tabs-window"),E=n("v-col"),F=n("v-row");return r(),m(k,null,[a(M,{color:"toolbar",title:l.$t("dialog.commodity_info")},{prepend:s(()=>[a(T,{text:l.$t("dialog.back"),location:"bottom"},{activator:s(({props:e})=>[a(p,b(e,{onClick:t[0]||(t[0]=d=>l.$router.back()),class:"d-none d-sm-flex",variant:"text",icon:"mdi-arrow-right"}),null,16)]),_:1},8,["text"])]),extension:s(()=>[a(O,{color:"primary",class:"bg-light",grow:"",modelValue:l.tabs,"onUpdate:modelValue":t[2]||(t[2]=e=>l.tabs=e)},{default:s(()=>[a(y,{value:"0"},{default:s(()=>[g(u(l.$t("dialog.general")),1)]),_:1}),a(y,{value:"1"},{default:s(()=>[g(u(l.$t("dialog.prices")),1)]),_:1}),a(y,{value:"2"},{default:s(()=>[g(u(l.$t("dialog.existly")),1)]),_:1}),a(y,{value:"3"},{default:s(()=>[g(u(l.$t("dialog.tax")),1)]),_:1})]),_:1},8,["modelValue"])]),default:s(()=>[a(L),a(p,{loading:l.loading,onClick:t[1]||(t[1]=e=>V.save()),icon:"",color:"green"},{default:s(()=>[a(T,{activator:"parent",text:l.$t("dialog.save"),location:"bottom"},null,8,["text"]),a(N,{icon:"mdi-content-save"})]),_:1},8,["loading"])]),_:1},8,["title"]),a(F,{class:"pa-1"},{default:s(()=>[a(E,null,{default:s(()=>[a(K,{modelValue:l.tabs,"onUpdate:modelValue":t[23]||(t[23]=e=>l.tabs=e)},{default:s(()=>[a(_,{value:"0"},{default:s(()=>[a(v,null,{default:s(()=>[a(f,null,{default:s(()=>[o("div",J,[o("div",Q,[o("div",null,[t[26]||(t[26]=o("label",{class:"me-4 text-primary"},"نوع کالا یا خدمات",-1)),o("div",W,[i(o("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>this.data.khadamat=e),class:"form-check-input",type:"radio",value:"true"},null,512),[[S,this.data.khadamat]]),t[24]||(t[24]=o("label",{class:"form-check-label",for:"inlineCheckbox1"},"خدمات",-1))]),o("div",X,[i(o("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>this.data.khadamat=e),class:"form-check-input",type:"radio",value:"false"},null,512),[[S,this.data.khadamat]]),t[25]||(t[25]=o("label",{class:"form-check-label",for:"inlineCheckbox2"},"کالا و اقلام فیزیکی",-1))])])]),o("div",Y,[o("div",Z,[o("div",tt,[i(o("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>this.data.speedAccess=e),class:"form-check-input",type:"checkbox"},null,512),[[$,this.data.speedAccess]]),t[27]||(t[27]=o("label",{class:"form-check-label"},"دسترسی سریع",-1))])])])]),o("div",ot,[o("div",lt,[o("div",et,[i(o("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>l.data.name=e),class:"form-control",type:"text"},null,512),[[h,l.data.name]]),t[28]||(t[28]=o("label",{class:"form-label"},[o("span",{class:"text-danger"},"(لازم)"),g(" نام کالا/خدمات")],-1))])]),o("div",at,[o("div",st,[i(o("select",{"onUpdate:modelValue":t[7]||(t[7]=e=>l.data.unit=e),class:"form-select"},[(r(!0),m(k,null,U(l.units,e=>(r(),m("option",{key:e.name,value:e.name},u(e.name),9,nt))),128))],512),[[x,l.data.unit]]),t[29]||(t[29]=o("label",{class:"form-label"},"واحد شمارش",-1))])]),o("div",it,[t[30]||(t[30]=o("small",{class:"mb-2"},"دسته بندی",-1)),i(o("select",{class:"form-select","aria-label":"دسته‌بندی","onUpdate:modelValue":t[8]||(t[8]=e=>this.data.cat=e)},[(r(!0),m(k,null,U(l.listCats,(e,d)=>(r(),m("option",{value:e.id},u(e.name),9,dt))),256))],512),[[x,this.data.cat]])]),o("div",rt,[a(D,null,{activator:s(({props:e})=>[a(p,b(e,{"prepend-icon":"mdi-wizard-hat",color:"surface-variant",text:l.$t("dialog.barcodes_generate"),class:"mb-2"}),null,16,["text"])]),default:s(({isActive:e})=>[a(v,{text:l.$t("dialog.barcodes_generate")},{default:s(()=>[a(f,null,{default:s(()=>[a(P,{min:1,max:400,modelValue:l.barcode.count,"onUpdate:modelValue":t[9]||(t[9]=d=>l.barcode.count=d),label:l.$t("dialog.count"),"prepend-inner-icon":"mdi-barcode"},null,8,["modelValue","label"])]),_:1}),a(A,null,{default:s(()=>[a(L),a(p,{text:l.$t("dialog.generate"),color:"success",variant:"flat",onClick:d=>{e.value=!1,V.generateBarcode()}},null,8,["text","onClick"]),a(p,{text:l.$t("dialog.close"),color:"secondary",variant:"flat",onClick:d=>e.value=!1},null,8,["text","onClick"])]),_:2},1024)]),_:2},1032,["text"])]),_:1}),a(R,{class:"text-left",modelValue:l.data.barcodes,"onUpdate:modelValue":t[10]||(t[10]=e=>l.data.barcodes=e),label:l.$t("dialog.barcodes"),placeholder:l.$t("dialog.barcodes_info"),"prepend-inner-icon":"mdi-barcode"},null,8,["modelValue","label","placeholder"])]),o("div",mt,[o("div",ut,[i(o("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>l.data.des=e),class:"form-control",type:"text"},null,512),[[h,l.data.des]]),t[31]||(t[31]=o("label",{class:"form-label"},"توضیحات",-1))])])])]),_:1})]),_:1})]),_:1}),a(_,{value:"1"},{default:s(()=>[a(v,null,{default:s(()=>[a(f,null,{default:s(()=>[o("div",ct,[o("div",pt,[o("div",ft,[a(C,b(l.currencyConfig,{min:"0",class:"form-control",modelValue:l.data.priceBuy,"onUpdate:modelValue":t[12]||(t[12]=e=>l.data.priceBuy=e)}),null,16,["modelValue"]),t[32]||(t[32]=o("label",{class:"form-label"},"قیمت خرید",-1))])]),o("div",vt,[o("div",bt,[a(C,b(l.currencyConfig,{min:"0",class:"form-control",modelValue:l.data.priceSell,"onUpdate:modelValue":t[13]||(t[13]=e=>l.data.priceSell=e)}),null,16,["modelValue"]),t[33]||(t[33]=o("label",{class:"form-label"},"قیمت فروش",-1))])]),V.isPluginActive("accpro")?(r(!0),m(k,{key:0},U(l.data.prices,e=>(r(),m("div",gt,[o("div",ht,[a(C,b({ref_for:!0},l.currencyConfig,{min:"0",class:"form-control",modelValue:e.priceSell,"onUpdate:modelValue":d=>e.priceSell=d}),null,16,["modelValue","onUpdate:modelValue"]),o("label",yt,u(e.list.label),1)])]))),256)):H("",!0)])]),_:1})]),_:1})]),_:1}),a(_,{value:"2"},{default:s(()=>[a(v,null,{default:s(()=>[a(f,null,{default:s(()=>[o("div",_t,[t[38]||(t[38]=o("b",{class:"text-primary-dark me-3"},"موجودی کالا",-1)),t[39]||(t[39]=o("label",{class:"text-muted"},"تنظیمات بخش موجودی کالا تنها برای نوع کالا اعمال می‌شود و برای نوع خدمات نادیده گرفته می‌شود.",-1)),o("div",kt,[o("div",Vt,[i(o("input",{"onUpdate:modelValue":t[14]||(t[14]=e=>l.data.commodityCountCheck=e),class:"form-check-input",type:"checkbox"},null,512),[[$,l.data.commodityCountCheck]]),t[34]||(t[34]=o("label",{class:"form-check-label"},"کنترل موجودی",-1))])]),o("div",Ct,[o("div",wt,[o("div",$t,[i(o("input",{"onUpdate:modelValue":t[15]||(t[15]=e=>l.data.minOrderCount=e),onBlur:t[16]||(t[16]=e=>{(this.data.minOrderCount===""||this.data.minOrderCount===0)&&(this.data.minOrderCount=1)}),onKeypress:t[17]||(t[17]=e=>this.$filters.onlyNumber(e)),class:"form-control",type:"number",min:"1"},null,544),[[h,l.data.minOrderCount]]),t[35]||(t[35]=o("label",{class:"form-label"},"حداقل سفارش",-1))])]),o("div",Ut,[o("div",Bt,[i(o("input",{"onUpdate:modelValue":t[18]||(t[18]=e=>l.data.orderPoint=e),onKeypress:t[19]||(t[19]=e=>this.$filters.onlyNumber(e)),class:"form-control",type:"number",min:"1"},null,544),[[h,l.data.orderPoint]]),t[36]||(t[36]=o("label",{class:"form-label"},"نقطه سفارش",-1))])]),o("div",Tt,[o("div",Lt,[i(o("input",{"onUpdate:modelValue":t[20]||(t[20]=e=>l.data.dayLoading=e),onKeypress:t[21]||(t[21]=e=>this.$filters.onlyNumber(e)),class:"form-control",type:"number"},null,544),[[h,l.data.dayLoading]]),t[37]||(t[37]=o("label",{class:"form-label"},"زمان انتظار(روز)",-1))])])])])]),_:1})]),_:1})]),_:1}),a(_,{value:"3"},{default:s(()=>[a(v,null,{default:s(()=>[a(f,null,{default:s(()=>[o("div",St,[o("div",xt,[o("div",Nt,[i(o("input",{"onUpdate:modelValue":t[22]||(t[22]=e=>this.data.withoutTax=e),class:"form-check-input",type:"checkbox"},null,512),[[$,this.data.withoutTax]]),t[40]||(t[40]=o("label",{class:"form-check-label"},"معاف از مالیات",-1))])])])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})],64)}const Et=z(I,[["render",Ot]]);export{Et as default};
