import{_ as v,L as k,a as i,S as d}from"./main-9b36f05f.js";import{a as r,o as y,s as g,e as t,d as a,b as c,w as x,u as b,ab as m,F as h}from"./vendor-adef9cb4.js";import{T as C}from"./style-964d1d14.js";const w={name:"list",components:{Tree:C,Loading:k},data:()=>({isLoading:!0,config:{roots:[],opened:!0,openedIcon:{type:"shape",stroke:"black",strokeWidth:3,viewBox:"0 0 24 24",draw:"M 2 12 L 22 12"},closedIcon:{type:"shape",stroke:"black",strokeWidth:3,viewBox:"0 0 24 24",draw:"M 12 2 L 12 22 M 2 12 L 22 12"}},tree:[],selectedNode:0,addCatText:"",editCatText:""}),mounted(){this.loadData()},methods:{loadData(){i.post("/api/commodity/cat/get").then(o=>{this.tree=o.data.items,this.config.roots.push(o.data.root.toString()),this.isLoading=!1})},addChild(o){this.selectedNode=o,new bootstrap.Modal("#ModalAdd",{}).show()},submitChild(o){this.addCatText.trim().length===0?d.fire({text:"نام دسته‌بندی الزامی است.",icon:"error",confirmButtonText:"قبول"}):i.post("/api/commodity/cat/insert",{upper:this.selectedNode,text:this.addCatText}).then(s=>{d.fire({text:"دسته بندی افزوده شد.",icon:"success",confirmButtonText:"قبول"}).then(l=>{document.getElementById("modalAddClose").click(),window.location.reload()})})},editeNode(o){this.selectedNode=o.id,this.editCatText=o.text,new bootstrap.Modal("#ModalEdit",{}).show()},submitEditChild(o){this.editCatText.trim().length===0?d.fire({text:"نام دسته‌بندی الزامی است.",icon:"error",confirmButtonText:"قبول"}):i.post("/api/commodity/cat/edit",{id:this.selectedNode,text:this.editCatText}).then(s=>{d.fire({text:"دسته بندی ویرایش شد.",icon:"success",confirmButtonText:"قبول"}).then(l=>{document.getElementById("modalEditClose").click(),window.location.reload()})})}}},T={class:"block block-content-full"},B={id:"fixed-header",class:"block-header block-header-default bg-gray-light pt-2 pb-1"},M={class:"block-title text-primary-dark"},_={class:"block-content pt-1 pb-3"},L={class:"row"},E={class:"col-sm-12 col-md-12 m-0 py-2 px-1 border border-1 rounded-2"},N=["onClick"],A=["onClick"],$={class:"modal fade",id:"ModalAdd","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},I={class:"modal-dialog"},V={class:"modal-content"},D={class:"modal-body"},S={class:"form-floating mb-4"},U={class:"modal-footer"},F={class:"modal fade",id:"ModalEdit","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},W={class:"modal-dialog"},j={class:"modal-content"},q={class:"modal-body"},z={class:"form-floating mb-4"},G={class:"modal-footer"};function H(o,s,l,J,K,n){const p=r("loading"),u=r("Tree");return y(),g(h,null,[t("div",T,[t("div",B,[t("h3",M,[t("button",{onClick:s[0]||(s[0]=e=>o.$router.back()),type:"button",class:"float-start d-none d-sm-none d-md-block btn btn-sm btn-link text-warning"},s[6]||(s[6]=[t("i",{class:"fa fw-bold fa-arrow-right"},null,-1)])),s[7]||(s[7]=t("i",{class:"mx-2 fa fa-tree"},null,-1)),s[8]||(s[8]=a(" دسته‌بندی‌های کالا و خدمات "))]),s[9]||(s[9]=t("div",{class:"block-options"},null,-1))]),t("div",_,[c(p,{color:"blue",loader:"dots",active:o.isLoading,"onUpdate:active":s[1]||(s[1]=e=>o.isLoading=e),"is-full-page":!1},null,8,["active"]),s[12]||(s[12]=t("div",{class:"alert alert-info"},[t("div",{class:"alert-heading"},[t("i",{class:"fa fa-warning"}),a(" هشدار")]),t("div",{class:""},"در انتخاب نوع دسته بندی دقت کنید . تا انتشار به روز رسانی بعدی حذف دسته بندی تنها از طریق تیکت پشتیبانی قابل انجام است.")],-1)),t("div",L,[t("div",E,[c(u,{nodes:o.tree,config:o.config},{"after-input":x(e=>[t("button",{class:"btn btn-link",type:"button",onClick:f=>n.addChild(e.node.id)},s[10]||(s[10]=[t("i",{class:"fa fa-plus-circle"},null,-1)]),8,N),t("button",{class:"btn btn-link text-warning",type:"button",onClick:f=>n.editeNode(e.node)},s[11]||(s[11]=[t("i",{class:"fa fa-edit"},null,-1)]),8,A)]),_:1},8,["nodes","config"])])])])]),t("div",$,[t("div",I,[t("div",V,[s[16]||(s[16]=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"staticBackdropLabel"},"افزودن دسته‌بندی"),t("div",{class:"block-options"},[t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})])],-1)),t("div",D,[t("div",S,[b(t("input",{"onUpdate:modelValue":s[2]||(s[2]=e=>o.addCatText=e),class:"form-control",type:"text"},null,512),[[m,o.addCatText]]),s[13]||(s[13]=t("label",{class:"form-label"},[t("span",{class:"text-danger"},"(لازم)"),a(" نام دسته بندی")],-1))])]),t("div",U,[t("button",{onClick:s[3]||(s[3]=(...e)=>this.submitChild&&this.submitChild(...e)),type:"button",class:"btn btn-primary"},s[14]||(s[14]=[t("i",{class:"fa fa-save"},null,-1),a(" ثبت")])),s[15]||(s[15]=t("button",{id:"modalAddClose",type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},[t("i",{class:"fa fa-close"}),a(" انصراف")],-1))])])])]),t("div",F,[t("div",W,[t("div",j,[s[20]||(s[20]=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"staticBackdropLabel"},"ویرایش دسته‌بندی"),t("div",{class:"block-options"},[t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})])],-1)),t("div",q,[t("div",z,[b(t("input",{"onUpdate:modelValue":s[4]||(s[4]=e=>o.editCatText=e),class:"form-control",type:"text"},null,512),[[m,o.editCatText]]),s[17]||(s[17]=t("label",{class:"form-label"},[t("span",{class:"text-danger"},"(لازم)"),a(" نام دسته بندی")],-1))])]),t("div",G,[t("button",{onClick:s[5]||(s[5]=(...e)=>this.submitEditChild&&this.submitEditChild(...e)),type:"button",class:"btn btn-primary"},s[18]||(s[18]=[t("i",{class:"fa fa-save"},null,-1),a(" ثبت")])),s[19]||(s[19]=t("button",{id:"modalEditClose",type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},[t("i",{class:"fa fa-close"}),a(" انصراف")],-1))])])])])],64)}const R=v(w,[["render",H],["__scopeId","data-v-c9977258"]]);export{R as default};
