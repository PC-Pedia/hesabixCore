import{_ as g,a as r,S as o}from"./main-9b36f05f.js";import{r as h,a as m,o as v,s as x,e as t,d as i,u as k,ab as y,b as u,w as c}from"./vendor-adef9cb4.js";const w={name:"list",data:()=>({loading:h(!0),name:"",items:[],headers:[{text:"عملیات",value:"operation"},{text:"نام چاپگر",value:"name",sortable:!0},{text:"توکن",value:"token",sortable:!0},{text:"وضعیت",value:"status",sortable:!0}]}),methods:{loadData(){r.post("/api/printers/list").then(s=>{this.items=s.data,this.loading=!1})},deleteItem(s){o.fire({text:"آیا برای حذف این چاپگر مطمئن هستید؟ دسترسی چاپ تا زمان نصب توکن جدید متوقف و اسناد در صف چاپ نیز حذف خواهند شد.!",showCancelButton:!0,confirmButtonText:"بله",cancelButtonText:"خیر",icon:"warning"}).then(e=>{e.isConfirmed&&r.post("/api/printers/delete/"+s).then(n=>{if(n.data.result==1){let d=0;for(let l=0;l<this.items.length;l++)d++,this.items[l].id==s&&this.items.splice(d-1,1);o.fire({text:"چاپگر با موفقیت حذف شد.",icon:"success",confirmButtonText:"قبول"})}else n.data.result==2&&o.fire({text:n.data.message,icon:"warning",confirmButtonText:"قبول"})})})},save(){this.name.length===0?o.fire({text:"نام چاپگر الزامی است.",icon:"error",confirmButtonText:"قبول"}):(this.loading=!0,r.post("/api/printers/insert",{name:this.name}).then(s=>{this.loading=!1,s.data.result==2?o.fire({text:"قبلا ثبت شده است.",icon:"error",confirmButtonText:"قبول"}):(this.closeModal(),this.loadData(),o.fire({text:"چاپگر افزوده شد.",icon:"success",confirmButtonText:"قبول"}).then(()=>{this.name=""}))}))},closeModal(){var s=document.getElementById("PrintNewModal"),e=bootstrap.Modal.getInstance(s);e.hide()}},beforeMount(){this.loadData()}},M={class:"block block-content-full"},_={id:"fixed-header",class:"block-header block-header-default bg-gray-light pt-2 pb-1"},B={class:"block-title text-primary-dark"},T={class:"block-options"},C={class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:"PrintNewModal",tabindex:"-1","aria-labelledby":"printerModalLabel","aria-hidden":"true"},P={class:"modal-dialog"},D={class:"modal-content"},N={class:"modal-body"},$={class:"form-floating mb-4"},E=["disabled"],V={class:"modal-footer"},I=["disabled"],S={class:"block-content pt-1 pb-3"},z={class:"row"},L={class:"col-sm-12 col-md-12 m-0 p-0"},q={"aria-labelledby":"dropdown-align-center-outline-primary",class:"dropdown-menu dropdown-menu-end",style:{}},H=["onClick"];function O(s,e,n,d,l,b){const p=m("router-link"),f=m("EasyDataTable");return v(),x("div",M,[t("div",_,[t("h3",B,[t("button",{onClick:e[0]||(e[0]=a=>s.$router.back()),type:"button",class:"float-start d-none d-sm-none d-md-block btn btn-sm btn-link text-warning"},e[3]||(e[3]=[t("i",{class:"fa fw-bold fa-arrow-right"},null,-1)])),e[4]||(e[4]=t("i",{class:"fa fa-print"},null,-1)),e[5]||(e[5]=i(" چاپگر‌های ابری "))]),t("div",T,[e[10]||(e[10]=t("button",{type:"button",class:"btn btn-sm btn-link","data-bs-toggle":"modal","data-bs-target":"#PrintNewModal"},[t("i",{class:"fa fa-plus"})],-1)),t("div",C,[t("div",P,[t("div",D,[e[9]||(e[9]=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5 text-primary",id:"printerModalLabel"},"افزودن چاپگر جدید"),t("div",{class:"block-options"},[t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})])],-1)),t("div",N,[e[7]||(e[7]=t("p",null," با ایجاد توکن یک رابط برای چاپ اسناد ایجاد می‌شود. بعد از ایجاد توکن آن را در داخل نرم افزار Hesabix Printer نصب شده به رایانه مورد نظر وارد کنید. ",-1)),t("div",$,[k(t("input",{disabled:s.loading,"onUpdate:modelValue":e[1]||(e[1]=a=>s.name=a),class:"form-control",type:"text"},null,8,E),[[y,s.name]]),e[6]||(e[6]=t("label",{class:"form-label"},[t("span",{class:"text-danger"},"(لازم)"),i(" نام چاپگر")],-1))])]),t("div",V,[e[8]||(e[8]=t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"بازگشت",-1)),t("button",{disabled:s.loading,onClick:e[2]||(e[2]=a=>b.save()),type:"button",class:"btn btn-primary"},"ایجاد کلید دسترسی",8,I)])])])])])]),t("div",S,[t("div",z,[t("div",L,[u(f,{"table-class-name":"customize-table","show-index":"",alternating:"","search-value":s.searchValue,headers:s.headers,items:s.items,"theme-color":"#1d90ff","header-text-direction":"center","body-text-direction":"center",rowsPerPageMessage:"تعداد سطر",emptyMessage:"اطلاعاتی برای نمایش وجود ندارد",rowsOfPageSeparatorMessage:"از",loading:s.loading},{"item-operation":c(({id:a})=>[e[13]||(e[13]=t("button",{"aria-expanded":"false","aria-haspopup":"true",class:"btn btn-sm btn-link","data-bs-toggle":"dropdown",id:"dropdown-align-center-alt-primary",type:"button"},[t("i",{class:"fa-solid fa-ellipsis"})],-1)),t("div",q,[u(p,{to:"/acc/printers/printqueue/"+a,class:"dropdown-item"},{default:c(()=>e[11]||(e[11]=[t("i",{class:"fa fa-list pe-2"},null,-1),i(" صف چاپ ")])),_:2},1032,["to"]),t("button",{type:"button",onClick:U=>b.deleteItem(a),class:"dropdown-item text-danger"},e[12]||(e[12]=[t("i",{class:"fa fa-trash pe-2"},null,-1),i(" حذف ")]),8,H)])]),_:1},8,["search-value","headers","items","loading"])])])])])}const F=g(w,[["render",O]]);export{F as default};
