import{a as m,_ as p,L as B}from"./main-9b36f05f.js";import{h as L,r as b,a as l,o as n,s as u,u as d,B as w,e as t,ar as D,b as r,F as f,d as x,c as A,A as V,t as a,ab as i,C as F}from"./vendor-adef9cb4.js";import{A as N}from"./archiveUpload-31fb560b.js";import{n as E}from"./notes-77134a25.js";const M=L({name:"documentLogButton",props:{docCode:String},data:()=>({logPermision:b(!1),itemsSelected:[],searchValue:"",loading:b(!0),items:[],headers:[{text:"تاریخ",value:"date"},{text:"کاربر",value:"user"},{text:"شرح",value:"des"}]}),methods:{loadData(){this.loading=!0,m.post("/api/business/my/permission/state",{permission:"log"}).then(s=>{s.data.state==!0&&(this.logPermision=!0,m.post("/api/business/logs/doc/"+this.$props.docCode).then(o=>{this.items=o.data,this.loading=!1}))})}},mounted(){this.loadData()}}),P={title:"تاریخچه سند",type:"button",class:"btn btn-sm btn-info mx-2","data-bs-toggle":"modal","data-bs-target":"#staticBackdrop"},S={class:"modal modal-lg fade",id:"staticBackdrop","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},U={class:"modal-dialog"},I={class:"modal-content"},T={class:"modal-body"};function z(s,o,g,h,v,_){const c=l("EasyDataTable");return n(),u(f,null,[d(t("button",P,o[0]||(o[0]=[t("i",{class:"fa fa-history me-2","aria-hidden":"true"},null,-1),t("span",{class:""},"تاریخچه",-1)]),512),[[w,this.logPermision]]),t("div",S,[t("div",U,[t("div",I,[o[1]||(o[1]=D('<div class="modal-header bg-info-light text-dark"><h1 class="modal-title fs-5" id="staticBackdropLabel"><i class="fa fa-history me-2" aria-hidden="true"></i> تاریخچه تغییرات سند </h1><div class="block-options"><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div></div>',1)),t("div",T,[r(c,{"table-class-name":"customize-table","show-index":"",alternating:"","search-value":s.searchValue,headers:s.headers,items:s.items,"theme-color":"#1d90ff","header-text-direction":"center","body-text-direction":"center",rowsPerPageMessage:"تعداد سطر",emptyMessage:"اطلاعاتی برای نمایش وجود ندارد",rowsOfPageSeparatorMessage:"از",loading:s.loading},null,8,["search-value","headers","items","loading"])])])])])],64)}const O=p(M,[["render",z]]);const j={name:"viewDoc",components:{ArchiveUpload:N,Loading:B,documentLogButton:O,notes:E},data:()=>({notes:{count:0},isLoading:!0,item:{doc:{id:0,code:""}}}),methods:{loadData(){m.post("/api/accounting/doc/get",{code:this.$route.params.id}).then(s=>{this.item=s.data,this.item.doc.amount=this.$filters.formatNumber(this.item.doc.amount),this.isLoading=!1})}},beforeMount(){this.loadData()}},q={class:"block block-content-full"},G={id:"fixed-header",class:"block-header block-header-default bg-gray-light pt-2 pb-1"},H={class:"block-title text-primary-dark"},J={class:"block-options"},K={type:"button",class:"btn btn-sm btn-warning text-light me-2","data-bs-toggle":"modal","data-bs-target":"#notesModal"},Q={class:"badge text-bg-dark me-2"},R={id:"dm-print",class:"block-content py-3 px-0 vl-parent"},W={class:"container-fluid"},X={class:"row"},Y={class:"col-sm-12 col-md-12"},Z={class:"row"},tt={class:"col-sm-6 col-md-4"},ot={class:"form-floating mb-3"},st={class:"col-sm-6 col-md-4"},et={class:"form-floating mb-3"},at={class:"col-sm-6 col-md-4"},lt={class:"form-floating mb-3"},nt={class:"row"},dt={class:"col-sm-12 col-md-12"},it={class:"form-floating mb-3"},ut={class:"col-sm-12 col-md-12"},rt={class:"table-responsive"},ct={class:"table table-sm table-bordered table-striped table-vcenter"};function mt(s,o,g,h,v,_){const c=l("archive-upload"),y=l("documentLogButton"),k=l("notes"),C=l("loading");return n(),u("div",q,[t("div",G,[t("h3",H,[t("button",{onClick:o[0]||(o[0]=e=>s.$router.back()),type:"button",class:"float-start d-none d-sm-none d-md-block btn btn-sm btn-link text-warning"},o[6]||(o[6]=[t("i",{class:"fa fw-bold fa-arrow-right"},null,-1)])),o[7]||(o[7]=x(" سند حسابداری"))]),t("div",J,[this.item.doc.id!=0?(n(),A(c,{key:0,docid:this.item.doc.id,doctype:"accounting",cat:"accounting"},null,8,["docid"])):V("",!0),r(y,{"doc-code":this.$route.params.id},null,8,["doc-code"]),t("button",K,[t("span",Q,a(this.notes.count),1),o[8]||(o[8]=t("i",{class:"fa-regular fa-note-sticky me-1"},null,-1)),o[9]||(o[9]=t("span",{class:"d-none d-sm-inline-block"},"یاداشت‌‌ها",-1))]),r(k,{stat:s.notes,code:this.$route.params.id,typeNote:"accounting"},null,8,["stat","code"]),o[10]||(o[10]=t("button",{class:"btn btn-sm btn-primary mx-2",onclick:"Dashmix.helpers('dm-print');",type:"button"},[t("i",{class:"si si-printer me-1"}),t("span",{class:"d-none d-sm-inline-block"},"چاپ سند")],-1))])]),t("div",R,[r(C,{color:"blue",loader:"dots",active:s.isLoading,"onUpdate:active":o[1]||(o[1]=e=>s.isLoading=e),"is-full-page":!1},null,8,["active"]),t("div",W,[t("div",X,[t("div",Y,[o[15]||(o[15]=t("div",{class:"fw-bold"},"مشخصات سند",-1)),t("div",Z,[t("div",tt,[t("div",ot,[d(t("input",{"onUpdate:modelValue":o[2]||(o[2]=e=>s.item.doc.code=e),type:"text",class:"form-control",disabled:"",readonly:""},null,512),[[i,s.item.doc.code]]),o[11]||(o[11]=t("label",{for:"floatingInput"},"شماره سند",-1))])]),t("div",st,[t("div",et,[d(t("input",{"onUpdate:modelValue":o[3]||(o[3]=e=>s.item.doc.date=e),type:"text",class:"form-control",disabled:"",readonly:""},null,512),[[i,s.item.doc.date]]),o[12]||(o[12]=t("label",{for:"floatingInput"},"تاریخ",-1))])]),t("div",at,[t("div",lt,[d(t("input",{"onUpdate:modelValue":o[4]||(o[4]=e=>s.item.doc.amount=e),type:"text",class:"form-control",disabled:"",readonly:""},null,512),[[i,s.item.doc.amount]]),o[13]||(o[13]=t("label",{for:"floatingInput"},"تراز تجمیعی(بستانکار / بدهکار )",-1))])])]),t("div",nt,[t("div",dt,[t("div",it,[d(t("input",{"onUpdate:modelValue":o[5]||(o[5]=e=>s.item.doc.des=e),type:"text",class:"form-control",disabled:"",readonly:""},null,512),[[i,s.item.doc.des]]),o[14]||(o[14]=t("label",{for:"floatingInput"},"شرح",-1))])])])]),t("div",ut,[t("div",rt,[t("table",ct,[o[16]||(o[16]=t("thead",null,[t("tr",null,[t("th",{class:"text-center"},"#"),t("th",null,"حساب"),t("th",null,"تفضیل"),t("th",null,"شرح"),t("th",null,"بدهکار"),t("th",null,"بستانکار")])],-1)),t("tbody",null,[(n(!0),u(f,null,F(s.item.rows,(e,$)=>(n(),u("tr",null,[t("td",null,a($),1),t("td",null,a(e.table),1),t("td",null,a(e.refCode+"-"+e.ref),1),t("td",null,a(e.des),1),t("td",null,a(s.$filters.formatNumber(e.bd)),1),t("td",null,a(s.$filters.formatNumber(e.bs)),1)]))),256))])])])])])])])])}const ht=p(j,[["render",mt],["__scopeId","data-v-260213f6"]]);export{ht as default};
