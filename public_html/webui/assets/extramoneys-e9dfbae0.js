import{_ as x,L as v,a as d,S as a}from"./main-9b36f05f.js";import{a as u,o as i,s as r,e as t,d as m,b as f,w as p,F as k,C as w,t as l,A as M}from"./vendor-adef9cb4.js";const B={name:"avatar",components:{Loading:v},data:()=>({loading:!0,loadingAdd:!1,moneys:[],moneyAll:[],bid:{},selectedMoney:{},showModal:!1,modal:""}),mounted(){this.modal=new bootstrap.Modal("#exampleModal")},methods:{loadData(){d.post("/api/business/get/info/"+localStorage.getItem("activeBid")).then(s=>{this.loading=!1,this.moneys=s.data.moneys,this.bid=s.data,this.selectedMoney=s.data.arzmain}),d.post("/api/money/get/all").then(s=>{this.moneyAll=s.data.data})},save(){this.selectedMoney==null&&a.fire({text:"گذینه‌ای انتخاب نشده است.",icon:"error",confirmButtonText:"قبول"});let s=!0;this.moneys.forEach(e=>{e.name==this.selectedMoney.name&&(s=!1,a.fire({text:"این ارز قبلا اضافه شده است.",icon:"error",confirmButtonText:"قبول"}))}),s&&(this.loadingAdd=!0,d.post("/api/money/add/to/business",{name:this.selectedMoney.name}).then(e=>{this.loadData(),this.loadingAdd=!1,this.modal.hide(),a.fire({text:"با موفقیت افزوده شد.",icon:"success",confirmButtonText:"قبول"})}))},deleteItem(s){a.fire({text:"این عملیات غیر قابل بازگشت است. تنها در صورتی قادر خواهید بود یک ارز را حذف نمایید که هیچ سند حسابداری با این ارز در کسب و کار شما ثبت نشده باشد.آیا مطمئن هستید؟",showCancelButton:!0,confirmButtonText:"بله",cancelButtonText:"خیر",icon:"warning"}).then(e=>{e.isConfirmed&&(this.loading=!0,d.post("/api/money/remove",{name:s}).then(n=>{this.loading=!1,n.data.Success==1?(this.loadData(),a.fire({text:" با موفقیت حذف شد.",icon:"success",confirmButtonText:"قبول"})):n.data.Success==!1&&a.fire({text:n.data.message,icon:"warning",confirmButtonText:"قبول"})}))})}},beforeMount(){this.loadData()}},C={class:"block block-content-full"},_={id:"fixed-header",class:"block-header block-header-default bg-gray-light pt-2 pb-1"},A={class:"block-title text-primary-dark"},T={class:"block-content p-0"},V={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},S={class:"modal-dialog"},$={class:"modal-content"},D={class:"modal-body"},L={class:"row"},N={class:"col-12 p-1"},I={class:"modal-footer"},z={class:"table table-striped table-vcenter"},E={class:"text-center",scope:"row"},F={class:"text-center fw-semibold"},U={class:"text-center"},j={class:"text-center"},q=["onClick"];function G(s,e,n,H,J,c){const y=u("loading"),h=u("v-cob");return i(),r("div",C,[t("div",_,[t("h3",A,[t("button",{onClick:e[0]||(e[0]=o=>s.$router.back()),type:"button",class:"float-start d-none d-sm-none d-md-block btn btn-sm btn-link text-warning"},e[4]||(e[4]=[t("i",{class:"fa fw-bold fa-arrow-right"},null,-1)])),e[5]||(e[5]=t("i",{class:"fa-solid fa-money-bill"},null,-1)),e[6]||(e[6]=m(" ارز‌های جانبی "))]),e[7]||(e[7]=t("div",{class:"block-options"},[t("button",{type:"button",class:"block-options-item btn btn-link border-0",title:"افزودن ارز جدید","data-bs-toggle":"modal","data-bs-target":"#exampleModal"},[t("span",{class:"fa fa-plus fw-bolder"})])],-1))]),t("div",T,[t("div",V,[t("div",S,[t("div",$,[f(y,{color:"blue",loader:"dots",active:s.loadingAdd,"onUpdate:active":e[1]||(e[1]=o=>s.loadingAdd=o),"is-full-page":!1},null,8,["active"]),e[12]||(e[12]=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"افزودن واحد ارزی جدید"),t("div",{class:"block-options"},[t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})])],-1)),t("div",D,[f(h,{class:"mb-1 mx-0",filterable:!0,dir:"rtl",options:s.moneyAll,label:"label",modelValue:s.selectedMoney,"onUpdate:modelValue":e[2]||(e[2]=o=>s.selectedMoney=o)},{"no-options":p(({search:o,searching:b,loading:g})=>e[8]||(e[8]=[m(" نتیجه‌ای یافت نشد! ")])),option:p(o=>[t("div",L,[t("div",N,[e[9]||(e[9]=t("i",{class:"fa fa-flag me-2"},null,-1)),m(" "+l(o.label)+" > "+l(o.name),1)])])]),_:1},8,["options","modelValue"])]),t("div",I,[e[11]||(e[11]=t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"بازگشت",-1)),t("button",{type:"button",onClick:e[3]||(e[3]=o=>c.save()),class:"btn btn-primary"},e[10]||(e[10]=[t("i",{class:"fa fa-save me-1"},null,-1),m(" افزودن ")]))])])])]),t("table",z,[e[14]||(e[14]=t("thead",null,[t("tr",null,[t("th",{class:"text-center",style:{width:"50px"}},"#"),t("th",{class:"text-center"},"واحد پولی"),t("th",{class:"text-center"},"اختصار"),t("th",{class:"text-center",style:{width:"100px"}},"عملیات")])],-1)),t("tbody",null,[(i(!0),r(k,null,w(s.moneys,(o,b)=>(i(),r("tr",null,[t("th",E,l(b+1),1),t("td",F,l(o.label),1),t("td",U,l(o.name),1),t("td",j,[o.name!=s.bid.arzmain.name?(i(),r("button",{key:0,onClick:g=>c.deleteItem(o.name),class:"btn btn-sm btn-alt-secondary",type:"button",title:" حذف ارز "},e[13]||(e[13]=[t("i",{class:"fa fa-times"},null,-1)]),8,q)):M("",!0)])]))),256))])])])])}const P=x(B,[["render",G]]);export{P as default};
