import{a as m,_ as C}from"./main-9b36f05f.js";import{h as g,r as v,a as c,o as l,s as r,e,d as i,b as p,w as n,u as y,ab as x,t as k,A as h}from"./vendor-adef9cb4.js";const V=g({name:"checkByStoreroom",data:()=>({storerooms:[],storeroom:null,searchValue:"",loading:v(!0),items:[],orgItems:[],headers:[{text:"کد",value:"commodity.code"},{text:"دسته بندی",value:"commodity.cat.name",sortable:!0},{text:"نام",value:"commodity.name",sortable:!0},{text:"واحد",value:"commodity.unit.name",sortable:!0},{text:"ورودی",value:"input",sortable:!0},{text:"خروجی",value:"output",sortable:!0},{text:"موجودی انبار",value:"existCount"},{text:"نقطه سفارش",value:"commodity.orderPoint"},{text:"وضعیت",value:"operation"}]}),watch:{searchValue(s,t){this.searchTable()}},methods:{loadData(){this.loading=!0,m.post("/api/storeroom/list").then(s=>{this.storerooms=s.data.data,this.storerooms.forEach(t=>{t.name=t.name+" انباردار : "+t.manager}),this.loading=!1})},loadStoreItems(){this.loading=!0,m.post("/api/storeroom/commodity/list/"+this.storeroom.id).then(s=>{this.items=s.data,this.orgItems=s.data,this.loading=!1})},searchTable(){this.loading=!0;let s=[],t=!1;this.searchValue==""&&(t=!0),t?this.items=this.orgItems:(this.orgItems.forEach(u=>{let a=!1;(u.commodity.name.includes(this.searchValue)||u.commodity.cat.name.includes(this.searchValue)||u.commodity.unit.name.includes(this.searchValue))&&(a=!0),a&&s.push(u)}),this.items=s),this.loading=!1}},beforeMount(){this.loadData()}}),w={class:"block block-content-full"},I={id:"fixed-header",class:"block-header block-header-default bg-gray-light pt-2 pb-1"},F={class:"block-title text-primary-dark"},A={class:"block-content pt-1 pb-3 dm-print"},E={class:"row"},_={class:"col-sm-12 col-md-12 px-0 mb-2"},D={class:"form-control"},$={class:"col-sm-12 col-md-12 m-0 p-0"},B={class:"mb-1"},M={class:"input-group input-group-sm"},S={key:0,class:"text-danger"},T={key:0,class:"text-danger"};function P(s,t,u,a,N,O){const b=c("v-cob"),f=c("EasyDataTable");return l(),r("div",w,[e("div",I,[e("h3",F,[e("button",{onClick:t[0]||(t[0]=o=>s.$router.back()),type:"button",class:"float-start d-none d-sm-none d-md-block btn btn-sm btn-link text-warning"},t[4]||(t[4]=[e("i",{class:"fa fw-bold fa-arrow-right"},null,-1)])),t[5]||(t[5]=e("i",{class:"mx-2 fa fa-boxes-stacked"},null,-1)),t[6]||(t[6]=i(" موجودی کالا "))]),t[7]||(t[7]=e("div",{class:"block-options"},[e("button",{class:"btn btn-sm btn-primary mx-2",onclick:"document.getElementById('hide-on-print').classList.add('d-none');Dashmix.helpers('dm-print');",type:"button"},[e("i",{class:"si si-printer me-1"}),e("span",{class:"d-none d-sm-inline-block"},"چاپ")])],-1))]),e("div",A,[e("div",E,[e("div",_,[e("div",D,[t[9]||(t[9]=e("label",{class:"form-label"},[i(" انبار : "),e("span",{class:"text-muted"},"برای مشاهده موجودی ابتدا انبار را انتخاب نمایید.")],-1)),p(b,{dir:"rtl",options:s.storerooms,label:"name",modelValue:s.storeroom,"onUpdate:modelValue":t[1]||(t[1]=o=>s.storeroom=o),"onOption:selected":t[2]||(t[2]=o=>s.loadStoreItems())},{"no-options":n(({search:o,searching:d,loading:U})=>t[8]||(t[8]=[i(" نتیجه‌ای یافت نشد! ")])),_:1},8,["options","modelValue"])])]),e("div",$,[e("div",B,[e("div",M,[t[10]||(t[10]=e("span",{class:"input-group-text"},[e("i",{class:"fa fa-search"})],-1)),y(e("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>s.searchValue=o),class:"form-control",type:"text",placeholder:"جست و جو ..."},null,512),[[x,s.searchValue]])])]),p(f,{"table-class-name":"customize-table","multi-sort":"","show-index":"",alternating:"",headers:s.headers,items:s.items,"theme-color":"#1d90ff","header-text-direction":"center","body-text-direction":"center",rowsPerPageMessage:"تعداد سطر",emptyMessage:"اطلاعاتی برای نمایش وجود ندارد",rowsOfPageSeparatorMessage:"از",loading:s.loading},{"item-existCount":n(({existCount:o})=>[e("b",null,k(Math.abs(o)),1),parseInt(o)<0?(l(),r("span",S," (منفی) ")):h("",!0)]),"item-operation":n(({existCount:o,commodity:d})=>[parseInt(o)<parseInt(d.orderPoint)?(l(),r("span",T," نیاز به شارژ انبار ")):h("",!0)]),_:1},8,["headers","items","loading"])])])])])}const j=C(V,[["render",P]]);export{j as default};
